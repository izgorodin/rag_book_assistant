2024-10-24 18:33:30,289 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-24 18:33:30,289 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-24 18:33:30,289 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-24 18:33:30,290 - httpx - DEBUG - load_verify_locations cafile='/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-24 18:33:30,290 - httpx - DEBUG - load_verify_locations cafile='/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-24 18:33:30,290 - httpx - DEBUG - load_verify_locations cafile='/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-24 18:33:30,296 - pinecone_plugin_interface.logging - INFO - Discovering subpackages in _NamespacePath(['/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/pinecone_plugins'])
2024-10-24 18:33:30,296 - pinecone_plugin_interface.logging - INFO - Discovering subpackages in _NamespacePath(['/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/pinecone_plugins'])
2024-10-24 18:33:30,296 - pinecone_plugin_interface.logging - INFO - Discovering subpackages in _NamespacePath(['/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/pinecone_plugins'])
2024-10-24 18:33:30,296 - pinecone_plugin_interface.logging - INFO - Looking for plugins in pinecone_plugins.inference
2024-10-24 18:33:30,296 - pinecone_plugin_interface.logging - INFO - Looking for plugins in pinecone_plugins.inference
2024-10-24 18:33:30,296 - pinecone_plugin_interface.logging - INFO - Looking for plugins in pinecone_plugins.inference
2024-10-24 18:33:30,306 - pinecone_plugin_interface.logging - INFO - Installing plugin inference into Pinecone
2024-10-24 18:33:30,306 - pinecone_plugin_interface.logging - INFO - Installing plugin inference into Pinecone
2024-10-24 18:33:30,306 - pinecone_plugin_interface.logging - INFO - Installing plugin inference into Pinecone
2024-10-24 18:33:30,620 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"indexes":[{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}]}'
2024-10-24 18:33:30,620 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"indexes":[{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}]}'
2024-10-24 18:33:30,620 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"indexes":[{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}]}'
2024-10-24 18:33:30,623 - root - INFO - Creating new Pinecone index: book-embeddings
2024-10-24 18:33:30,623 - root - INFO - Creating new Pinecone index: book-embeddings
2024-10-24 18:33:30,623 - root - INFO - Creating new Pinecone index: book-embeddings
2024-10-24 18:33:33,555 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"error":{"code":"ALREADY_EXISTS","message":"Resource  already exists"},"status":409}'
2024-10-24 18:33:33,555 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"error":{"code":"ALREADY_EXISTS","message":"Resource  already exists"},"status":409}'
2024-10-24 18:33:33,555 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"error":{"code":"ALREADY_EXISTS","message":"Resource  already exists"},"status":409}'
2024-10-24 18:33:33,555 - root - INFO - Index book-embeddings already exists. Using existing index.
2024-10-24 18:33:33,555 - root - INFO - Index book-embeddings already exists. Using existing index.
2024-10-24 18:33:33,555 - root - INFO - Index book-embeddings already exists. Using existing index.
2024-10-24 18:33:34,298 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}'
2024-10-24 18:33:34,298 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}'
2024-10-24 18:33:34,298 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}'
2024-10-24 18:33:35,169 - root - INFO - Splitting text into chunks (size: 300, overlap: 150)
2024-10-24 18:33:35,169 - root - INFO - Splitting text into chunks (size: 300, overlap: 150)
2024-10-24 18:33:35,169 - root - INFO - Splitting text into chunks (size: 300, overlap: 150)
2024-10-24 18:33:35,169 - root - INFO - Splitting text into chunks (size: 300, overlap: 150)
2024-10-24 18:33:35,172 - root - INFO - Created 199 chunks
2024-10-24 18:33:35,172 - root - INFO - Created 199 chunks
2024-10-24 18:33:35,172 - root - INFO - Created 199 chunks
2024-10-24 18:33:35,172 - root - INFO - Created 199 chunks
2024-10-24 18:33:35,172 - pinecone_plugin_interface.logging - INFO - Discovering subpackages in _NamespacePath(['/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/pinecone_plugins'])
2024-10-24 18:33:35,172 - pinecone_plugin_interface.logging - INFO - Discovering subpackages in _NamespacePath(['/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/pinecone_plugins'])
2024-10-24 18:33:35,172 - pinecone_plugin_interface.logging - INFO - Discovering subpackages in _NamespacePath(['/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/pinecone_plugins'])
2024-10-24 18:33:35,172 - pinecone_plugin_interface.logging - INFO - Discovering subpackages in _NamespacePath(['/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/pinecone_plugins'])
2024-10-24 18:33:35,172 - pinecone_plugin_interface.logging - INFO - Looking for plugins in pinecone_plugins.inference
2024-10-24 18:33:35,172 - pinecone_plugin_interface.logging - INFO - Looking for plugins in pinecone_plugins.inference
2024-10-24 18:33:35,172 - pinecone_plugin_interface.logging - INFO - Looking for plugins in pinecone_plugins.inference
2024-10-24 18:33:35,172 - pinecone_plugin_interface.logging - INFO - Looking for plugins in pinecone_plugins.inference
2024-10-24 18:33:35,173 - pinecone_plugin_interface.logging - INFO - Installing plugin inference into Pinecone
2024-10-24 18:33:35,173 - pinecone_plugin_interface.logging - INFO - Installing plugin inference into Pinecone
2024-10-24 18:33:35,173 - pinecone_plugin_interface.logging - INFO - Installing plugin inference into Pinecone
2024-10-24 18:33:35,173 - pinecone_plugin_interface.logging - INFO - Installing plugin inference into Pinecone
2024-10-24 18:33:35,542 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"indexes":[{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}]}'
2024-10-24 18:33:35,542 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"indexes":[{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}]}'
2024-10-24 18:33:35,542 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"indexes":[{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}]}'
2024-10-24 18:33:35,542 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"indexes":[{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}]}'
2024-10-24 18:33:35,544 - root - INFO - Creating new Pinecone index: book-embeddings
2024-10-24 18:33:35,544 - root - INFO - Creating new Pinecone index: book-embeddings
2024-10-24 18:33:35,544 - root - INFO - Creating new Pinecone index: book-embeddings
2024-10-24 18:33:35,544 - root - INFO - Creating new Pinecone index: book-embeddings
2024-10-24 18:33:35,857 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"error":{"code":"ALREADY_EXISTS","message":"Resource  already exists"},"status":409}'
2024-10-24 18:33:35,857 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"error":{"code":"ALREADY_EXISTS","message":"Resource  already exists"},"status":409}'
2024-10-24 18:33:35,857 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"error":{"code":"ALREADY_EXISTS","message":"Resource  already exists"},"status":409}'
2024-10-24 18:33:35,857 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"error":{"code":"ALREADY_EXISTS","message":"Resource  already exists"},"status":409}'
2024-10-24 18:33:35,858 - root - INFO - Index book-embeddings already exists. Using existing index.
2024-10-24 18:33:35,858 - root - INFO - Index book-embeddings already exists. Using existing index.
2024-10-24 18:33:35,858 - root - INFO - Index book-embeddings already exists. Using existing index.
2024-10-24 18:33:35,858 - root - INFO - Index book-embeddings already exists. Using existing index.
2024-10-24 18:33:35,900 - tests.conftest - INFO - Test test_qa_system[qa_pair0] took 0.00 seconds
2024-10-24 18:33:35,900 - tests.conftest - INFO - Test test_qa_system[qa_pair0] took 0.00 seconds
2024-10-24 18:33:35,900 - tests.conftest - INFO - Test test_qa_system[qa_pair0] took 0.00 seconds
2024-10-24 18:33:35,900 - tests.conftest - INFO - Test test_qa_system[qa_pair0] took 0.00 seconds
2024-10-24 18:33:35,901 - tests.conftest - INFO - Test test_qa_system[\n    {\n        "question": "Who was the executive vice president of Ford who conceived the Pinto project?",\n        "answer": "Lee Iacocca",\n        "context": "Mr. Iacocca, then a Ford vice president, conceived the project and was its moving force."\n    },\n    {\n        "question": "What was the weight target for the Pinto set by Ford?",\n        "answer": "2,000 pounds",\n        "context": "Ford's objective was to build a car at or below 2,000 pounds to sell for no more than $2,000."\n    },\n    {\n        "question": "On what date did the accident involving Lily Gray and Richard Grimshaw occur?",\n        "answer": "May 28, 1972",\n        "context": "On May 28, 1972, Mrs. Gray, accompanied by 13-year-old Richard Grimshaw, set out in the Pinto from Anaheim for Barstow to meet Mr. Gray."\n    },\n    {\n        "question": "What was the speed of the Ford Galaxie at the moment of impact with the Pinto?",\n        "answer": "28 to 37 miles per hour",\n        "context": "The Galaxie had been traveling from 50 to 55 miles per hour but before the impact had been braked to a speed of from 28 to 37 miles per hour."\n    },\n    {\n        "question": "What factors influenced the placement of the fuel tank in the Ford Pinto?",\n        "answer": "Styling decisions that preceded engineering design",\n        "context": "The Pinto's styling, however, required the tank to be placed behind the rear axle leaving only 9 or 10 inches of 'crush space'--far less than in any other American automobile or Ford overseas subcompact."\n    },\n    {\n        "question": "How did Ford's crash tests reveal the Pinto's fuel system vulnerabilities?",\n        "answer": "Tests showed fuel tank punctures and fuel leakage at low speeds",\n        "context": "Mechanical prototypes struck from the rear with a moving barrier at 21 miles per hour caused the fuel tank to be driven forward and to be punctured, causing fuel leakage in excess of the standard prescribed by the proposed regulation."\n    },\n    {\n        "question": "What was the estimated cost to fix the Pinto's fuel tank design, and how did Ford justify not implementing it?",\n        "answer": "$6.40 per vehicle, justified by cost-benefit analysis",\n        "context": "The cost to remedy the defective design of the Pinto gas tank was estimated to be $6.40 per vehicle. Ford used a cost-benefit analysis to determine that it was cheaper to pay for potential lawsuits than to fix the design."\n    },\n    {\n        "question": "How did the court define 'malice' in the context of the Ford Pinto case?",\n        "answer": "Conscious disregard for the safety of others",\n        "context": "The court defined 'malice' as conduct evincing 'conscious disregard of the probability that the actor's conduct will result in injury to others.'"\n    },\n    {\n        "question": "What was the initial punitive damage award for Grimshaw, and how was it later modified?",\n        "answer": "$125 million, reduced to $3.5 million",\n        "context": "Grimshaw was awarded $2,516,000 compensatory damages and $125 million punitive damages; the Grays were awarded $559,680 in compensatory damages. On Ford's motion for a new trial, Grimshaw was required to remit all but $3 1/2 million of the punitive award as a condition of denial of the motion."\n    },\n    {\n        "question": "How did Ford's 'rush' development of the Pinto affect its safety design?",\n        "answer": "Styling preceded engineering, dictating design choices",\n        "context": "Pinto, however, was a rush project, so that styling preceded engineering and dictated engineering design to a greater degree than usual."\n    },\n    {\n        "question": "What evidence suggested that Ford was aware of the Pinto's safety issues before its release?",\n        "answer": "Crash test results and engineer testimonies",\n        "context": "Harley Copp, a former Ford engineer and executive in charge of the crash testing program, testified that the highest level of Ford's management made the decision to go forward with the production of the Pinto, knowing that the gas tank was vulnerable to puncture and rupture at low rear impact speeds."\n    },\n    {\n        "question": "How did the Pinto case impact the legal understanding of corporate responsibility and product liability?",\n        "answer": "Established precedent for punitive damages in product liability cases",\n        "context": "The case set a precedent for awarding punitive damages in product liability cases and highlighted the importance of corporate responsibility in product safety."\n    },\n    {\n        "question": "What was the significance of the 'crush space' in the Pinto's design, and how did it compare to other vehicles?",\n        "answer": "9-10 inches, less than other American cars",\n        "context": "The Pinto's styling, however, required the tank to be placed behind the rear axle leaving only 9 or 10 inches of 'crush space'--far less than in any other American automobile or Ford overseas subcompact."\n    },\n    {\n        "question": "How did Ford's internal memo about the cost-benefit analysis of safety improvements come to light during the trial?",\n        "answer": "Through the testimony of Harley Copp",\n        "context": "Harley Copp's testimony revealed the existence of Ford's internal cost-benefit analysis memo, which compared the cost of improvements to the potential costs of lawsuits from deaths and injuries."\n    },\n    ] took 0.00 seconds
2024-10-24 18:33:35,901 - tests.conftest - INFO - Test test_qa_system[\n    {\n        "question": "Who was the executive vice president of Ford who conceived the Pinto project?",\n        "answer": "Lee Iacocca",\n        "context": "Mr. Iacocca, then a Ford vice president, conceived the project and was its moving force."\n    },\n    {\n        "question": "What was the weight target for the Pinto set by Ford?",\n        "answer": "2,000 pounds",\n        "context": "Ford's objective was to build a car at or below 2,000 pounds to sell for no more than $2,000."\n    },\n    {\n        "question": "On what date did the accident involving Lily Gray and Richard Grimshaw occur?",\n        "answer": "May 28, 1972",\n        "context": "On May 28, 1972, Mrs. Gray, accompanied by 13-year-old Richard Grimshaw, set out in the Pinto from Anaheim for Barstow to meet Mr. Gray."\n    },\n    {\n        "question": "What was the speed of the Ford Galaxie at the moment of impact with the Pinto?",\n        "answer": "28 to 37 miles per hour",\n        "context": "The Galaxie had been traveling from 50 to 55 miles per hour but before the impact had been braked to a speed of from 28 to 37 miles per hour."\n    },\n    {\n        "question": "What factors influenced the placement of the fuel tank in the Ford Pinto?",\n        "answer": "Styling decisions that preceded engineering design",\n        "context": "The Pinto's styling, however, required the tank to be placed behind the rear axle leaving only 9 or 10 inches of 'crush space'--far less than in any other American automobile or Ford overseas subcompact."\n    },\n    {\n        "question": "How did Ford's crash tests reveal the Pinto's fuel system vulnerabilities?",\n        "answer": "Tests showed fuel tank punctures and fuel leakage at low speeds",\n        "context": "Mechanical prototypes struck from the rear with a moving barrier at 21 miles per hour caused the fuel tank to be driven forward and to be punctured, causing fuel leakage in excess of the standard prescribed by the proposed regulation."\n    },\n    {\n        "question": "What was the estimated cost to fix the Pinto's fuel tank design, and how did Ford justify not implementing it?",\n        "answer": "$6.40 per vehicle, justified by cost-benefit analysis",\n        "context": "The cost to remedy the defective design of the Pinto gas tank was estimated to be $6.40 per vehicle. Ford used a cost-benefit analysis to determine that it was cheaper to pay for potential lawsuits than to fix the design."\n    },\n    {\n        "question": "How did the court define 'malice' in the context of the Ford Pinto case?",\n        "answer": "Conscious disregard for the safety of others",\n        "context": "The court defined 'malice' as conduct evincing 'conscious disregard of the probability that the actor's conduct will result in injury to others.'"\n    },\n    {\n        "question": "What was the initial punitive damage award for Grimshaw, and how was it later modified?",\n        "answer": "$125 million, reduced to $3.5 million",\n        "context": "Grimshaw was awarded $2,516,000 compensatory damages and $125 million punitive damages; the Grays were awarded $559,680 in compensatory damages. On Ford's motion for a new trial, Grimshaw was required to remit all but $3 1/2 million of the punitive award as a condition of denial of the motion."\n    },\n    {\n        "question": "How did Ford's 'rush' development of the Pinto affect its safety design?",\n        "answer": "Styling preceded engineering, dictating design choices",\n        "context": "Pinto, however, was a rush project, so that styling preceded engineering and dictated engineering design to a greater degree than usual."\n    },\n    {\n        "question": "What evidence suggested that Ford was aware of the Pinto's safety issues before its release?",\n        "answer": "Crash test results and engineer testimonies",\n        "context": "Harley Copp, a former Ford engineer and executive in charge of the crash testing program, testified that the highest level of Ford's management made the decision to go forward with the production of the Pinto, knowing that the gas tank was vulnerable to puncture and rupture at low rear impact speeds."\n    },\n    {\n        "question": "How did the Pinto case impact the legal understanding of corporate responsibility and product liability?",\n        "answer": "Established precedent for punitive damages in product liability cases",\n        "context": "The case set a precedent for awarding punitive damages in product liability cases and highlighted the importance of corporate responsibility in product safety."\n    },\n    {\n        "question": "What was the significance of the 'crush space' in the Pinto's design, and how did it compare to other vehicles?",\n        "answer": "9-10 inches, less than other American cars",\n        "context": "The Pinto's styling, however, required the tank to be placed behind the rear axle leaving only 9 or 10 inches of 'crush space'--far less than in any other American automobile or Ford overseas subcompact."\n    },\n    {\n        "question": "How did Ford's internal memo about the cost-benefit analysis of safety improvements come to light during the trial?",\n        "answer": "Through the testimony of Harley Copp",\n        "context": "Harley Copp's testimony revealed the existence of Ford's internal cost-benefit analysis memo, which compared the cost of improvements to the potential costs of lawsuits from deaths and injuries."\n    },\n    ] took 0.00 seconds
2024-10-24 18:33:35,901 - tests.conftest - INFO - Test test_qa_system[\n    {\n        "question": "Who was the executive vice president of Ford who conceived the Pinto project?",\n        "answer": "Lee Iacocca",\n        "context": "Mr. Iacocca, then a Ford vice president, conceived the project and was its moving force."\n    },\n    {\n        "question": "What was the weight target for the Pinto set by Ford?",\n        "answer": "2,000 pounds",\n        "context": "Ford's objective was to build a car at or below 2,000 pounds to sell for no more than $2,000."\n    },\n    {\n        "question": "On what date did the accident involving Lily Gray and Richard Grimshaw occur?",\n        "answer": "May 28, 1972",\n        "context": "On May 28, 1972, Mrs. Gray, accompanied by 13-year-old Richard Grimshaw, set out in the Pinto from Anaheim for Barstow to meet Mr. Gray."\n    },\n    {\n        "question": "What was the speed of the Ford Galaxie at the moment of impact with the Pinto?",\n        "answer": "28 to 37 miles per hour",\n        "context": "The Galaxie had been traveling from 50 to 55 miles per hour but before the impact had been braked to a speed of from 28 to 37 miles per hour."\n    },\n    {\n        "question": "What factors influenced the placement of the fuel tank in the Ford Pinto?",\n        "answer": "Styling decisions that preceded engineering design",\n        "context": "The Pinto's styling, however, required the tank to be placed behind the rear axle leaving only 9 or 10 inches of 'crush space'--far less than in any other American automobile or Ford overseas subcompact."\n    },\n    {\n        "question": "How did Ford's crash tests reveal the Pinto's fuel system vulnerabilities?",\n        "answer": "Tests showed fuel tank punctures and fuel leakage at low speeds",\n        "context": "Mechanical prototypes struck from the rear with a moving barrier at 21 miles per hour caused the fuel tank to be driven forward and to be punctured, causing fuel leakage in excess of the standard prescribed by the proposed regulation."\n    },\n    {\n        "question": "What was the estimated cost to fix the Pinto's fuel tank design, and how did Ford justify not implementing it?",\n        "answer": "$6.40 per vehicle, justified by cost-benefit analysis",\n        "context": "The cost to remedy the defective design of the Pinto gas tank was estimated to be $6.40 per vehicle. Ford used a cost-benefit analysis to determine that it was cheaper to pay for potential lawsuits than to fix the design."\n    },\n    {\n        "question": "How did the court define 'malice' in the context of the Ford Pinto case?",\n        "answer": "Conscious disregard for the safety of others",\n        "context": "The court defined 'malice' as conduct evincing 'conscious disregard of the probability that the actor's conduct will result in injury to others.'"\n    },\n    {\n        "question": "What was the initial punitive damage award for Grimshaw, and how was it later modified?",\n        "answer": "$125 million, reduced to $3.5 million",\n        "context": "Grimshaw was awarded $2,516,000 compensatory damages and $125 million punitive damages; the Grays were awarded $559,680 in compensatory damages. On Ford's motion for a new trial, Grimshaw was required to remit all but $3 1/2 million of the punitive award as a condition of denial of the motion."\n    },\n    {\n        "question": "How did Ford's 'rush' development of the Pinto affect its safety design?",\n        "answer": "Styling preceded engineering, dictating design choices",\n        "context": "Pinto, however, was a rush project, so that styling preceded engineering and dictated engineering design to a greater degree than usual."\n    },\n    {\n        "question": "What evidence suggested that Ford was aware of the Pinto's safety issues before its release?",\n        "answer": "Crash test results and engineer testimonies",\n        "context": "Harley Copp, a former Ford engineer and executive in charge of the crash testing program, testified that the highest level of Ford's management made the decision to go forward with the production of the Pinto, knowing that the gas tank was vulnerable to puncture and rupture at low rear impact speeds."\n    },\n    {\n        "question": "How did the Pinto case impact the legal understanding of corporate responsibility and product liability?",\n        "answer": "Established precedent for punitive damages in product liability cases",\n        "context": "The case set a precedent for awarding punitive damages in product liability cases and highlighted the importance of corporate responsibility in product safety."\n    },\n    {\n        "question": "What was the significance of the 'crush space' in the Pinto's design, and how did it compare to other vehicles?",\n        "answer": "9-10 inches, less than other American cars",\n        "context": "The Pinto's styling, however, required the tank to be placed behind the rear axle leaving only 9 or 10 inches of 'crush space'--far less than in any other American automobile or Ford overseas subcompact."\n    },\n    {\n        "question": "How did Ford's internal memo about the cost-benefit analysis of safety improvements come to light during the trial?",\n        "answer": "Through the testimony of Harley Copp",\n        "context": "Harley Copp's testimony revealed the existence of Ford's internal cost-benefit analysis memo, which compared the cost of improvements to the potential costs of lawsuits from deaths and injuries."\n    },\n    ] took 0.00 seconds
2024-10-24 18:33:35,901 - tests.conftest - INFO - Test test_qa_system[\n    {\n        "question": "Who was the executive vice president of Ford who conceived the Pinto project?",\n        "answer": "Lee Iacocca",\n        "context": "Mr. Iacocca, then a Ford vice president, conceived the project and was its moving force."\n    },\n    {\n        "question": "What was the weight target for the Pinto set by Ford?",\n        "answer": "2,000 pounds",\n        "context": "Ford's objective was to build a car at or below 2,000 pounds to sell for no more than $2,000."\n    },\n    {\n        "question": "On what date did the accident involving Lily Gray and Richard Grimshaw occur?",\n        "answer": "May 28, 1972",\n        "context": "On May 28, 1972, Mrs. Gray, accompanied by 13-year-old Richard Grimshaw, set out in the Pinto from Anaheim for Barstow to meet Mr. Gray."\n    },\n    {\n        "question": "What was the speed of the Ford Galaxie at the moment of impact with the Pinto?",\n        "answer": "28 to 37 miles per hour",\n        "context": "The Galaxie had been traveling from 50 to 55 miles per hour but before the impact had been braked to a speed of from 28 to 37 miles per hour."\n    },\n    {\n        "question": "What factors influenced the placement of the fuel tank in the Ford Pinto?",\n        "answer": "Styling decisions that preceded engineering design",\n        "context": "The Pinto's styling, however, required the tank to be placed behind the rear axle leaving only 9 or 10 inches of 'crush space'--far less than in any other American automobile or Ford overseas subcompact."\n    },\n    {\n        "question": "How did Ford's crash tests reveal the Pinto's fuel system vulnerabilities?",\n        "answer": "Tests showed fuel tank punctures and fuel leakage at low speeds",\n        "context": "Mechanical prototypes struck from the rear with a moving barrier at 21 miles per hour caused the fuel tank to be driven forward and to be punctured, causing fuel leakage in excess of the standard prescribed by the proposed regulation."\n    },\n    {\n        "question": "What was the estimated cost to fix the Pinto's fuel tank design, and how did Ford justify not implementing it?",\n        "answer": "$6.40 per vehicle, justified by cost-benefit analysis",\n        "context": "The cost to remedy the defective design of the Pinto gas tank was estimated to be $6.40 per vehicle. Ford used a cost-benefit analysis to determine that it was cheaper to pay for potential lawsuits than to fix the design."\n    },\n    {\n        "question": "How did the court define 'malice' in the context of the Ford Pinto case?",\n        "answer": "Conscious disregard for the safety of others",\n        "context": "The court defined 'malice' as conduct evincing 'conscious disregard of the probability that the actor's conduct will result in injury to others.'"\n    },\n    {\n        "question": "What was the initial punitive damage award for Grimshaw, and how was it later modified?",\n        "answer": "$125 million, reduced to $3.5 million",\n        "context": "Grimshaw was awarded $2,516,000 compensatory damages and $125 million punitive damages; the Grays were awarded $559,680 in compensatory damages. On Ford's motion for a new trial, Grimshaw was required to remit all but $3 1/2 million of the punitive award as a condition of denial of the motion."\n    },\n    {\n        "question": "How did Ford's 'rush' development of the Pinto affect its safety design?",\n        "answer": "Styling preceded engineering, dictating design choices",\n        "context": "Pinto, however, was a rush project, so that styling preceded engineering and dictated engineering design to a greater degree than usual."\n    },\n    {\n        "question": "What evidence suggested that Ford was aware of the Pinto's safety issues before its release?",\n        "answer": "Crash test results and engineer testimonies",\n        "context": "Harley Copp, a former Ford engineer and executive in charge of the crash testing program, testified that the highest level of Ford's management made the decision to go forward with the production of the Pinto, knowing that the gas tank was vulnerable to puncture and rupture at low rear impact speeds."\n    },\n    {\n        "question": "How did the Pinto case impact the legal understanding of corporate responsibility and product liability?",\n        "answer": "Established precedent for punitive damages in product liability cases",\n        "context": "The case set a precedent for awarding punitive damages in product liability cases and highlighted the importance of corporate responsibility in product safety."\n    },\n    {\n        "question": "What was the significance of the 'crush space' in the Pinto's design, and how did it compare to other vehicles?",\n        "answer": "9-10 inches, less than other American cars",\n        "context": "The Pinto's styling, however, required the tank to be placed behind the rear axle leaving only 9 or 10 inches of 'crush space'--far less than in any other American automobile or Ford overseas subcompact."\n    },\n    {\n        "question": "How did Ford's internal memo about the cost-benefit analysis of safety improvements come to light during the trial?",\n        "answer": "Through the testimony of Harley Copp",\n        "context": "Harley Copp's testimony revealed the existence of Ford's internal cost-benefit analysis memo, which compared the cost of improvements to the potential costs of lawsuits from deaths and injuries."\n    },\n    ] took 0.00 seconds
2024-10-24 18:54:57,139 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-24 18:54:57,140 - httpx - DEBUG - load_verify_locations cafile='/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-24 18:54:57,146 - pinecone_plugin_interface.logging - INFO - Discovering subpackages in _NamespacePath(['/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/pinecone_plugins'])
2024-10-24 18:54:57,146 - pinecone_plugin_interface.logging - INFO - Looking for plugins in pinecone_plugins.inference
2024-10-24 18:54:57,155 - pinecone_plugin_interface.logging - INFO - Installing plugin inference into Pinecone
2024-10-24 18:54:57,787 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"indexes":[{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}]}'
2024-10-24 18:54:57,787 - root - INFO - Creating new Pinecone index: book-embeddings
2024-10-24 18:54:58,754 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"error":{"code":"ALREADY_EXISTS","message":"Resource  already exists"},"status":409}'
2024-10-24 18:54:58,754 - root - INFO - Index book-embeddings already exists. Using existing index.
2024-10-24 18:54:59,336 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}'
2024-10-24 18:55:00,994 - root - INFO - Splitting text into chunks (size: 300, overlap: 150)
2024-10-24 18:55:00,999 - root - INFO - Created 199 chunks
2024-10-24 18:55:01,002 - pinecone_plugin_interface.logging - INFO - Discovering subpackages in _NamespacePath(['/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/pinecone_plugins'])
2024-10-24 18:55:01,002 - pinecone_plugin_interface.logging - INFO - Looking for plugins in pinecone_plugins.inference
2024-10-24 18:55:01,002 - pinecone_plugin_interface.logging - INFO - Installing plugin inference into Pinecone
2024-10-24 18:55:02,234 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"indexes":[{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}]}'
2024-10-24 18:55:02,235 - root - INFO - Creating new Pinecone index: book-embeddings
2024-10-24 18:55:02,760 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"error":{"code":"ALREADY_EXISTS","message":"Resource  already exists"},"status":409}'
2024-10-24 18:55:02,761 - root - INFO - Index book-embeddings already exists. Using existing index.
2024-10-24 18:55:02,807 - root - INFO - Test test_qa_system[qa_pair0] took 0.00 seconds
2024-10-24 18:55:02,808 - root - INFO - Test test_qa_system[\n    {\n        "question": "Who was the executive vice president of Ford who conceived the Pinto project?",\n        "answer": "Lee Iacocca",\n        "context": "Mr. Iacocca, then a Ford vice president, conceived the project and was its moving force."\n    },\n    {\n        "question": "What was the weight target for the Pinto set by Ford?",\n        "answer": "2,000 pounds",\n        "context": "Ford's objective was to build a car at or below 2,000 pounds to sell for no more than $2,000."\n    },\n    {\n        "question": "On what date did the accident involving Lily Gray and Richard Grimshaw occur?",\n        "answer": "May 28, 1972",\n        "context": "On May 28, 1972, Mrs. Gray, accompanied by 13-year-old Richard Grimshaw, set out in the Pinto from Anaheim for Barstow to meet Mr. Gray."\n    },\n    {\n        "question": "What was the speed of the Ford Galaxie at the moment of impact with the Pinto?",\n        "answer": "28 to 37 miles per hour",\n        "context": "The Galaxie had been traveling from 50 to 55 miles per hour but before the impact had been braked to a speed of from 28 to 37 miles per hour."\n    },\n    {\n        "question": "What factors influenced the placement of the fuel tank in the Ford Pinto?",\n        "answer": "Styling decisions that preceded engineering design",\n        "context": "The Pinto's styling, however, required the tank to be placed behind the rear axle leaving only 9 or 10 inches of 'crush space'--far less than in any other American automobile or Ford overseas subcompact."\n    },\n    {\n        "question": "How did Ford's crash tests reveal the Pinto's fuel system vulnerabilities?",\n        "answer": "Tests showed fuel tank punctures and fuel leakage at low speeds",\n        "context": "Mechanical prototypes struck from the rear with a moving barrier at 21 miles per hour caused the fuel tank to be driven forward and to be punctured, causing fuel leakage in excess of the standard prescribed by the proposed regulation."\n    },\n    {\n        "question": "What was the estimated cost to fix the Pinto's fuel tank design, and how did Ford justify not implementing it?",\n        "answer": "$6.40 per vehicle, justified by cost-benefit analysis",\n        "context": "The cost to remedy the defective design of the Pinto gas tank was estimated to be $6.40 per vehicle. Ford used a cost-benefit analysis to determine that it was cheaper to pay for potential lawsuits than to fix the design."\n    },\n    {\n        "question": "How did the court define 'malice' in the context of the Ford Pinto case?",\n        "answer": "Conscious disregard for the safety of others",\n        "context": "The court defined 'malice' as conduct evincing 'conscious disregard of the probability that the actor's conduct will result in injury to others.'"\n    },\n    {\n        "question": "What was the initial punitive damage award for Grimshaw, and how was it later modified?",\n        "answer": "$125 million, reduced to $3.5 million",\n        "context": "Grimshaw was awarded $2,516,000 compensatory damages and $125 million punitive damages; the Grays were awarded $559,680 in compensatory damages. On Ford's motion for a new trial, Grimshaw was required to remit all but $3 1/2 million of the punitive award as a condition of denial of the motion."\n    },\n    {\n        "question": "How did Ford's 'rush' development of the Pinto affect its safety design?",\n        "answer": "Styling preceded engineering, dictating design choices",\n        "context": "Pinto, however, was a rush project, so that styling preceded engineering and dictated engineering design to a greater degree than usual."\n    },\n    {\n        "question": "What evidence suggested that Ford was aware of the Pinto's safety issues before its release?",\n        "answer": "Crash test results and engineer testimonies",\n        "context": "Harley Copp, a former Ford engineer and executive in charge of the crash testing program, testified that the highest level of Ford's management made the decision to go forward with the production of the Pinto, knowing that the gas tank was vulnerable to puncture and rupture at low rear impact speeds."\n    },\n    {\n        "question": "How did the Pinto case impact the legal understanding of corporate responsibility and product liability?",\n        "answer": "Established precedent for punitive damages in product liability cases",\n        "context": "The case set a precedent for awarding punitive damages in product liability cases and highlighted the importance of corporate responsibility in product safety."\n    },\n    {\n        "question": "What was the significance of the 'crush space' in the Pinto's design, and how did it compare to other vehicles?",\n        "answer": "9-10 inches, less than other American cars",\n        "context": "The Pinto's styling, however, required the tank to be placed behind the rear axle leaving only 9 or 10 inches of 'crush space'--far less than in any other American automobile or Ford overseas subcompact."\n    },\n    {\n        "question": "How did Ford's internal memo about the cost-benefit analysis of safety improvements come to light during the trial?",\n        "answer": "Through the testimony of Harley Copp",\n        "context": "Harley Copp's testimony revealed the existence of Ford's internal cost-benefit analysis memo, which compared the cost of improvements to the potential costs of lawsuits from deaths and injuries."\n    },\n    ] took 0.00 seconds
2024-10-24 22:11:09,673 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-24 22:11:09,673 - httpx - DEBUG - load_verify_locations cafile='/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-24 22:11:09,679 - pinecone_plugin_interface.logging - INFO - Discovering subpackages in _NamespacePath(['/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/pinecone_plugins'])
2024-10-24 22:11:09,679 - pinecone_plugin_interface.logging - INFO - Looking for plugins in pinecone_plugins.inference
2024-10-24 22:11:09,689 - pinecone_plugin_interface.logging - INFO - Installing plugin inference into Pinecone
2024-10-24 22:11:10,155 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"indexes":[{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}]}'
2024-10-24 22:11:10,158 - root - INFO - Creating new Pinecone index: book-embeddings
2024-10-24 22:11:11,023 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"error":{"code":"ALREADY_EXISTS","message":"Resource  already exists"},"status":409}'
2024-10-24 22:11:11,023 - root - INFO - Index book-embeddings already exists. Using existing index.
2024-10-24 22:11:11,253 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}'
2024-10-24 22:11:12,105 - root - INFO - Splitting text into chunks (size: 300, overlap: 150)
2024-10-24 22:11:12,107 - root - INFO - Created 199 chunks
2024-10-24 22:11:12,107 - pinecone_plugin_interface.logging - INFO - Discovering subpackages in _NamespacePath(['/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/pinecone_plugins'])
2024-10-24 22:11:12,107 - pinecone_plugin_interface.logging - INFO - Looking for plugins in pinecone_plugins.inference
2024-10-24 22:11:12,107 - pinecone_plugin_interface.logging - INFO - Installing plugin inference into Pinecone
2024-10-24 22:11:12,434 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"indexes":[{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}]}'
2024-10-24 22:11:12,434 - root - INFO - Creating new Pinecone index: book-embeddings
2024-10-24 22:11:12,693 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"error":{"code":"ALREADY_EXISTS","message":"Resource  already exists"},"status":409}'
2024-10-24 22:11:12,694 - root - INFO - Index book-embeddings already exists. Using existing index.
2024-10-24 22:11:12,761 - root - INFO - Processing RAG query: What was the model year of the Ford Pinto involved in the accident?
2024-10-24 22:11:12,761 - pinecone_plugin_interface.logging - INFO - Discovering subpackages in _NamespacePath(['/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/pinecone_plugins'])
2024-10-24 22:11:12,762 - pinecone_plugin_interface.logging - INFO - Looking for plugins in pinecone_plugins.inference
2024-10-24 22:11:12,762 - pinecone_plugin_interface.logging - INFO - Installing plugin inference into Pinecone
2024-10-24 22:11:13,111 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"indexes":[{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}]}'
2024-10-24 22:11:13,113 - root - INFO - Creating new Pinecone index: book-embeddings
2024-10-24 22:11:13,403 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"error":{"code":"ALREADY_EXISTS","message":"Resource  already exists"},"status":409}'
2024-10-24 22:11:13,403 - root - INFO - Index book-embeddings already exists. Using existing index.
2024-10-24 22:11:13,404 - pinecone_plugin_interface.logging - INFO - Discovering subpackages in _NamespacePath(['/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/pinecone_plugins'])
2024-10-24 22:11:13,404 - pinecone_plugin_interface.logging - INFO - Looking for plugins in pinecone_plugins.inference
2024-10-24 22:11:13,405 - pinecone_plugin_interface.logging - INFO - Installing plugin inference into Pinecone
2024-10-24 22:11:13,773 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"indexes":[{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}]}'
2024-10-24 22:11:13,775 - root - INFO - Creating new Pinecone index: book-embeddings
2024-10-24 22:11:14,168 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"error":{"code":"ALREADY_EXISTS","message":"Resource  already exists"},"status":409}'
2024-10-24 22:11:14,169 - root - INFO - Index book-embeddings already exists. Using existing index.
2024-10-24 22:11:15,160 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"upsertedCount":1}'
2024-10-24 22:11:16,048 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"results":[],"matches":[{"id":"381ff60ffe74542b971aeaa2148a488c","score":1.00000799,"values":[],"metadata":{"text":"What was the model year of the Ford Pinto involved in the accident?"}},{"id":"7c25ca08798757a5d15caefbcf6d0c6a","score":0.699642897,"values":[],"metadata":{"text":"How did Ford\'s \'rush\' development of the Pinto affect its safety design?"}},{"id":"2ce3084ae5e281f5816fb0b3e11c5cf6","score":0.677877963,"values":[],"metadata":{"text":"How did Ford\'s crash tests reveal the Pinto\'s fuel system vulnerabilities?"}},{"id":"032d6d9f7cf883f483068a2d1d3ea7d0","score":0.649451852,"values":[],"metadata":{"text":"What was the speed of the Ford Galaxie at the moment of impact with the Pinto?"}},{"id":"34d53f2e1e7ce76e0573ae33e295b16d","score":0.640364826,"values":[],"metadata":{"text":"What evidence suggested that Ford was aware of the Pinto\'s safety issues before its release?"}},{"id":"6baf920636bb0e7a14c37c499f0a135f","score":0.591545105,"values":[],"metadata":{"text":"What factors influenced the placement of the fuel tank in the Ford Pinto?"}},{"id":"51bf0066086639adb0a494086a5121ce","score":0.587939262,"values":[],"metadata":{"text":"Who was the executive vice president of Ford who conceived the Pinto project?"}},{"id":"01e59f8ef084bd6a4d99f9067667d768","score":0.578649342,"values":[],"metadata":{"text":"What was the weight target for the Pinto set by Ford?"}},{"id":"4af6bd37a7ac7aa66d6fa4606aaa82b0","score":0.577010334,"values":[],"metadata":{"text":"What was the estimated cost to fix the Pinto\'s fuel tank design, and how did Ford justify not implementing it?"}},{"id":"fc2832187ee0402317d49a6c0df724ae","score":0.566243768,"values":[],"metadata":{"text":"How did the Pinto case impact the legal understanding of corporate responsibility and product liability?"}}],"namespace":"","usage":{"readUnits":6}}'
2024-10-24 22:11:16,051 - root - ERROR - Error in RAG query process: 'chunk'
Traceback (most recent call last):
  File "/Users/eduardizgorodin/Projects/rag_book_assistant/src/rag.py", line 72, in rag_query
    relevant_chunks = pinecone_manager.search_similar(query_embedding, top_k=10)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/eduardizgorodin/Projects/rag_book_assistant/src/pinecone_manager.py", line 121, in search_similar
    return [{"chunk": match['metadata']['chunk'], "score": match['score']} for match in results['matches']]
                      ~~~~~~~~~~~~~~~~~^^^^^^^^^
KeyError: 'chunk'
2024-10-24 22:11:16,088 - rag_results - INFO - 
Q: What was the model year of the Ford Pinto involved in the accident?
2024-10-24 22:11:16,088 - rag_results - INFO - Expected A: 1972
2024-10-24 22:11:16,088 - rag_results - INFO - System A: Sorry, I encountered an error while processing your query: 'chunk'
2024-10-24 22:11:16,088 - rag_results - INFO - Is correct: False
2024-10-24 22:11:16,088 - rag_results - INFO - --------------------------------------------------
2024-10-24 22:11:16,181 - root - INFO - Test test_qa_system[qa_pair0] took 3.42 seconds
2024-10-24 22:11:16,183 - root - INFO - Test test_qa_system[\n    {\n        "question": "Who was the executive vice president of Ford who conceived the Pinto project?",\n        "answer": "Lee Iacocca",\n        "context": "Mr. Iacocca, then a Ford vice president, conceived the project and was its moving force."\n    },\n    {\n        "question": "What was the weight target for the Pinto set by Ford?",\n        "answer": "2,000 pounds",\n        "context": "Ford's objective was to build a car at or below 2,000 pounds to sell for no more than $2,000."\n    },\n    {\n        "question": "On what date did the accident involving Lily Gray and Richard Grimshaw occur?",\n        "answer": "May 28, 1972",\n        "context": "On May 28, 1972, Mrs. Gray, accompanied by 13-year-old Richard Grimshaw, set out in the Pinto from Anaheim for Barstow to meet Mr. Gray."\n    },\n    {\n        "question": "What was the speed of the Ford Galaxie at the moment of impact with the Pinto?",\n        "answer": "28 to 37 miles per hour",\n        "context": "The Galaxie had been traveling from 50 to 55 miles per hour but before the impact had been braked to a speed of from 28 to 37 miles per hour."\n    },\n    {\n        "question": "What factors influenced the placement of the fuel tank in the Ford Pinto?",\n        "answer": "Styling decisions that preceded engineering design",\n        "context": "The Pinto's styling, however, required the tank to be placed behind the rear axle leaving only 9 or 10 inches of 'crush space'--far less than in any other American automobile or Ford overseas subcompact."\n    },\n    {\n        "question": "How did Ford's crash tests reveal the Pinto's fuel system vulnerabilities?",\n        "answer": "Tests showed fuel tank punctures and fuel leakage at low speeds",\n        "context": "Mechanical prototypes struck from the rear with a moving barrier at 21 miles per hour caused the fuel tank to be driven forward and to be punctured, causing fuel leakage in excess of the standard prescribed by the proposed regulation."\n    },\n    {\n        "question": "What was the estimated cost to fix the Pinto's fuel tank design, and how did Ford justify not implementing it?",\n        "answer": "$6.40 per vehicle, justified by cost-benefit analysis",\n        "context": "The cost to remedy the defective design of the Pinto gas tank was estimated to be $6.40 per vehicle. Ford used a cost-benefit analysis to determine that it was cheaper to pay for potential lawsuits than to fix the design."\n    },\n    {\n        "question": "How did the court define 'malice' in the context of the Ford Pinto case?",\n        "answer": "Conscious disregard for the safety of others",\n        "context": "The court defined 'malice' as conduct evincing 'conscious disregard of the probability that the actor's conduct will result in injury to others.'"\n    },\n    {\n        "question": "What was the initial punitive damage award for Grimshaw, and how was it later modified?",\n        "answer": "$125 million, reduced to $3.5 million",\n        "context": "Grimshaw was awarded $2,516,000 compensatory damages and $125 million punitive damages; the Grays were awarded $559,680 in compensatory damages. On Ford's motion for a new trial, Grimshaw was required to remit all but $3 1/2 million of the punitive award as a condition of denial of the motion."\n    },\n    {\n        "question": "How did Ford's 'rush' development of the Pinto affect its safety design?",\n        "answer": "Styling preceded engineering, dictating design choices",\n        "context": "Pinto, however, was a rush project, so that styling preceded engineering and dictated engineering design to a greater degree than usual."\n    },\n    {\n        "question": "What evidence suggested that Ford was aware of the Pinto's safety issues before its release?",\n        "answer": "Crash test results and engineer testimonies",\n        "context": "Harley Copp, a former Ford engineer and executive in charge of the crash testing program, testified that the highest level of Ford's management made the decision to go forward with the production of the Pinto, knowing that the gas tank was vulnerable to puncture and rupture at low rear impact speeds."\n    },\n    {\n        "question": "How did the Pinto case impact the legal understanding of corporate responsibility and product liability?",\n        "answer": "Established precedent for punitive damages in product liability cases",\n        "context": "The case set a precedent for awarding punitive damages in product liability cases and highlighted the importance of corporate responsibility in product safety."\n    },\n    {\n        "question": "What was the significance of the 'crush space' in the Pinto's design, and how did it compare to other vehicles?",\n        "answer": "9-10 inches, less than other American cars",\n        "context": "The Pinto's styling, however, required the tank to be placed behind the rear axle leaving only 9 or 10 inches of 'crush space'--far less than in any other American automobile or Ford overseas subcompact."\n    },\n    {\n        "question": "How did Ford's internal memo about the cost-benefit analysis of safety improvements come to light during the trial?",\n        "answer": "Through the testimony of Harley Copp",\n        "context": "Harley Copp's testimony revealed the existence of Ford's internal cost-benefit analysis memo, which compared the cost of improvements to the potential costs of lawsuits from deaths and injuries."\n    },\n    ] took 0.00 seconds
2024-10-24 22:28:02,317 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-24 22:28:02,317 - httpx - DEBUG - load_verify_locations cafile='/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-24 22:28:02,323 - pinecone_plugin_interface.logging - INFO - Discovering subpackages in _NamespacePath(['/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/pinecone_plugins'])
2024-10-24 22:28:02,324 - pinecone_plugin_interface.logging - INFO - Looking for plugins in pinecone_plugins.inference
2024-10-24 22:28:02,332 - pinecone_plugin_interface.logging - INFO - Installing plugin inference into Pinecone
2024-10-24 22:28:03,308 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"indexes":[{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}]}'
2024-10-24 22:28:03,310 - root - INFO - Creating new Pinecone index: book-embeddings
2024-10-24 22:28:04,998 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"error":{"code":"ALREADY_EXISTS","message":"Resource  already exists"},"status":409}'
2024-10-24 22:28:04,999 - root - INFO - Index book-embeddings already exists. Using existing index.
2024-10-24 22:28:05,612 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}'
2024-10-24 22:28:06,470 - root - INFO - Splitting text into chunks (size: 300, overlap: 150)
2024-10-24 22:28:06,472 - root - INFO - Created 199 chunks
2024-10-24 22:28:06,473 - pinecone_plugin_interface.logging - INFO - Discovering subpackages in _NamespacePath(['/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/pinecone_plugins'])
2024-10-24 22:28:06,473 - pinecone_plugin_interface.logging - INFO - Looking for plugins in pinecone_plugins.inference
2024-10-24 22:28:06,473 - pinecone_plugin_interface.logging - INFO - Installing plugin inference into Pinecone
2024-10-24 22:28:06,852 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"indexes":[{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}]}'
2024-10-24 22:28:06,854 - root - INFO - Creating new Pinecone index: book-embeddings
2024-10-24 22:28:09,505 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"error":{"code":"ALREADY_EXISTS","message":"Resource  already exists"},"status":409}'
2024-10-24 22:28:09,505 - root - INFO - Index book-embeddings already exists. Using existing index.
2024-10-24 22:28:09,565 - root - INFO - Processing RAG query: What was the model year of the Ford Pinto involved in the accident?
2024-10-24 22:28:09,565 - pinecone_plugin_interface.logging - INFO - Discovering subpackages in _NamespacePath(['/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/pinecone_plugins'])
2024-10-24 22:28:09,566 - pinecone_plugin_interface.logging - INFO - Looking for plugins in pinecone_plugins.inference
2024-10-24 22:28:09,566 - pinecone_plugin_interface.logging - INFO - Installing plugin inference into Pinecone
2024-10-24 22:28:11,039 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"indexes":[{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}]}'
2024-10-24 22:28:11,041 - root - INFO - Creating new Pinecone index: book-embeddings
2024-10-24 22:28:13,700 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"error":{"code":"ALREADY_EXISTS","message":"Resource  already exists"},"status":409}'
2024-10-24 22:28:13,702 - root - INFO - Index book-embeddings already exists. Using existing index.
2024-10-24 22:28:13,705 - pinecone_plugin_interface.logging - INFO - Discovering subpackages in _NamespacePath(['/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/pinecone_plugins'])
2024-10-24 22:28:13,705 - pinecone_plugin_interface.logging - INFO - Looking for plugins in pinecone_plugins.inference
2024-10-24 22:28:13,706 - pinecone_plugin_interface.logging - INFO - Installing plugin inference into Pinecone
2024-10-24 22:28:14,616 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"indexes":[{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}]}'
2024-10-24 22:28:14,617 - root - INFO - Creating new Pinecone index: book-embeddings
2024-10-24 22:28:16,771 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"error":{"code":"ALREADY_EXISTS","message":"Resource  already exists"},"status":409}'
2024-10-24 22:28:16,772 - root - INFO - Index book-embeddings already exists. Using existing index.
2024-10-24 22:28:17,724 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"upsertedCount":1}'
2024-10-24 22:28:18,515 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"results":[],"matches":[{"id":"381ff60ffe74542b971aeaa2148a488c","score":1.00000799,"values":[],"metadata":{"text":"What was the model year of the Ford Pinto involved in the accident?"}},{"id":"0","score":1,"values":[],"metadata":{"chunk":"What was the model year of the Ford Pinto involved in the accident?"}},{"id":"7c25ca08798757a5d15caefbcf6d0c6a","score":0.699642897,"values":[],"metadata":{"text":"How did Ford\'s \'rush\' development of the Pinto affect its safety design?"}},{"id":"2ce3084ae5e281f5816fb0b3e11c5cf6","score":0.677877963,"values":[],"metadata":{"text":"How did Ford\'s crash tests reveal the Pinto\'s fuel system vulnerabilities?"}},{"id":"032d6d9f7cf883f483068a2d1d3ea7d0","score":0.649451852,"values":[],"metadata":{"text":"What was the speed of the Ford Galaxie at the moment of impact with the Pinto?"}},{"id":"34d53f2e1e7ce76e0573ae33e295b16d","score":0.640364826,"values":[],"metadata":{"text":"What evidence suggested that Ford was aware of the Pinto\'s safety issues before its release?"}},{"id":"6baf920636bb0e7a14c37c499f0a135f","score":0.591545105,"values":[],"metadata":{"text":"What factors influenced the placement of the fuel tank in the Ford Pinto?"}},{"id":"51bf0066086639adb0a494086a5121ce","score":0.587939262,"values":[],"metadata":{"text":"Who was the executive vice president of Ford who conceived the Pinto project?"}},{"id":"01e59f8ef084bd6a4d99f9067667d768","score":0.578649342,"values":[],"metadata":{"text":"What was the weight target for the Pinto set by Ford?"}},{"id":"4af6bd37a7ac7aa66d6fa4606aaa82b0","score":0.577010334,"values":[],"metadata":{"text":"What was the estimated cost to fix the Pinto\'s fuel tank design, and how did Ford justify not implementing it?"}}],"namespace":"","usage":{"readUnits":6}}'
2024-10-24 22:28:18,518 - root - ERROR - Error in RAG query process: 'chunk'
Traceback (most recent call last):
  File "/Users/eduardizgorodin/Projects/rag_book_assistant/src/rag.py", line 72, in rag_query
    relevant_chunks = pinecone_manager.search_similar(query_embedding, top_k=10)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/eduardizgorodin/Projects/rag_book_assistant/src/pinecone_manager.py", line 121, in search_similar
    return [{"chunk": match['metadata']['chunk'], "score": match['score']} for match in results['matches']]
                      ~~~~~~~~~~~~~~~~~^^^^^^^^^
KeyError: 'chunk'
2024-10-24 22:28:18,555 - rag_results - INFO - 
Q: What was the model year of the Ford Pinto involved in the accident?
2024-10-24 22:28:18,556 - rag_results - INFO - Expected A: 1972
2024-10-24 22:28:18,556 - rag_results - INFO - System A: Sorry, I encountered an error while processing your query: 'chunk'
2024-10-24 22:28:18,556 - rag_results - INFO - Is correct: False
2024-10-24 22:28:18,556 - rag_results - INFO - --------------------------------------------------
2024-10-24 22:28:18,651 - root - INFO - Test test_qa_system[qa_pair0] took 9.09 seconds
2024-10-24 22:41:23,686 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-24 22:41:23,687 - httpx - DEBUG - load_verify_locations cafile='/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-24 22:41:23,693 - pinecone_plugin_interface.logging - INFO - Discovering subpackages in _NamespacePath(['/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/pinecone_plugins'])
2024-10-24 22:41:23,693 - pinecone_plugin_interface.logging - INFO - Looking for plugins in pinecone_plugins.inference
2024-10-24 22:41:23,702 - pinecone_plugin_interface.logging - INFO - Installing plugin inference into Pinecone
2024-10-24 22:41:24,112 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"indexes":[{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}]}'
2024-10-24 22:41:24,113 - root - INFO - Creating new Pinecone index: book-embeddings
2024-10-24 22:41:24,442 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"error":{"code":"ALREADY_EXISTS","message":"Resource  already exists"},"status":409}'
2024-10-24 22:41:24,442 - root - INFO - Index book-embeddings already exists. Using existing index.
2024-10-24 22:41:24,638 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}'
2024-10-24 22:41:25,514 - root - INFO - Splitting text into chunks (size: 300, overlap: 150)
2024-10-24 22:41:25,516 - root - INFO - Created 199 chunks
2024-10-24 22:41:25,516 - pinecone_plugin_interface.logging - INFO - Discovering subpackages in _NamespacePath(['/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/pinecone_plugins'])
2024-10-24 22:41:25,516 - pinecone_plugin_interface.logging - INFO - Looking for plugins in pinecone_plugins.inference
2024-10-24 22:41:25,516 - pinecone_plugin_interface.logging - INFO - Installing plugin inference into Pinecone
2024-10-24 22:41:25,808 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"indexes":[{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}]}'
2024-10-24 22:41:25,808 - root - INFO - Creating new Pinecone index: book-embeddings
2024-10-24 22:41:26,051 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"error":{"code":"ALREADY_EXISTS","message":"Resource  already exists"},"status":409}'
2024-10-24 22:41:26,052 - root - INFO - Index book-embeddings already exists. Using existing index.
2024-10-24 22:41:26,110 - root - INFO - Processing RAG query: What was the model year of the Ford Pinto involved in the accident?
2024-10-24 22:41:26,111 - pinecone_plugin_interface.logging - INFO - Discovering subpackages in _NamespacePath(['/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/pinecone_plugins'])
2024-10-24 22:41:26,111 - pinecone_plugin_interface.logging - INFO - Looking for plugins in pinecone_plugins.inference
2024-10-24 22:41:26,111 - pinecone_plugin_interface.logging - INFO - Installing plugin inference into Pinecone
2024-10-24 22:41:26,435 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"indexes":[{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}]}'
2024-10-24 22:41:26,436 - root - INFO - Creating new Pinecone index: book-embeddings
2024-10-24 22:41:26,798 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"error":{"code":"ALREADY_EXISTS","message":"Resource  already exists"},"status":409}'
2024-10-24 22:41:26,798 - root - INFO - Index book-embeddings already exists. Using existing index.
2024-10-24 22:41:26,799 - pinecone_plugin_interface.logging - INFO - Discovering subpackages in _NamespacePath(['/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/pinecone_plugins'])
2024-10-24 22:41:26,799 - pinecone_plugin_interface.logging - INFO - Looking for plugins in pinecone_plugins.inference
2024-10-24 22:41:26,799 - pinecone_plugin_interface.logging - INFO - Installing plugin inference into Pinecone
2024-10-24 22:41:27,093 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"indexes":[{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}]}'
2024-10-24 22:41:27,094 - root - INFO - Creating new Pinecone index: book-embeddings
2024-10-24 22:41:27,516 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"error":{"code":"ALREADY_EXISTS","message":"Resource  already exists"},"status":409}'
2024-10-24 22:41:27,517 - root - INFO - Index book-embeddings already exists. Using existing index.
2024-10-24 22:41:28,506 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"upsertedCount":1}'
2024-10-24 22:41:29,336 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"results":[],"matches":[{"id":"0","score":1.00000799,"values":[],"metadata":{"chunk":"What was the model year of the Ford Pinto involved in the accident?"}},{"id":"381ff60ffe74542b971aeaa2148a488c","score":1.00000799,"values":[],"metadata":{"text":"What was the model year of the Ford Pinto involved in the accident?"}},{"id":"7c25ca08798757a5d15caefbcf6d0c6a","score":0.699642897,"values":[],"metadata":{"text":"How did Ford\'s \'rush\' development of the Pinto affect its safety design?"}},{"id":"2ce3084ae5e281f5816fb0b3e11c5cf6","score":0.677877963,"values":[],"metadata":{"text":"How did Ford\'s crash tests reveal the Pinto\'s fuel system vulnerabilities?"}},{"id":"032d6d9f7cf883f483068a2d1d3ea7d0","score":0.649451852,"values":[],"metadata":{"text":"What was the speed of the Ford Galaxie at the moment of impact with the Pinto?"}},{"id":"34d53f2e1e7ce76e0573ae33e295b16d","score":0.640364826,"values":[],"metadata":{"text":"What evidence suggested that Ford was aware of the Pinto\'s safety issues before its release?"}},{"id":"6baf920636bb0e7a14c37c499f0a135f","score":0.591545105,"values":[],"metadata":{"text":"What factors influenced the placement of the fuel tank in the Ford Pinto?"}},{"id":"51bf0066086639adb0a494086a5121ce","score":0.587939262,"values":[],"metadata":{"text":"Who was the executive vice president of Ford who conceived the Pinto project?"}},{"id":"01e59f8ef084bd6a4d99f9067667d768","score":0.578649342,"values":[],"metadata":{"text":"What was the weight target for the Pinto set by Ford?"}},{"id":"4af6bd37a7ac7aa66d6fa4606aaa82b0","score":0.577010334,"values":[],"metadata":{"text":"What was the estimated cost to fix the Pinto\'s fuel tank design, and how did Ford justify not implementing it?"}}],"namespace":"","usage":{"readUnits":6}}'
2024-10-24 22:41:29,339 - root - INFO - Generated answer: <MagicMock name='mock.generate_answer()' id='5473217440'>
2024-10-24 22:41:29,478 - root - INFO - Test test_qa_system[qa_pair0] took 3.37 seconds
2024-10-24 22:48:46,760 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-24 22:48:46,760 - httpx - DEBUG - load_verify_locations cafile='/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-24 22:48:46,767 - pinecone_plugin_interface.logging - INFO - Discovering subpackages in _NamespacePath(['/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/pinecone_plugins'])
2024-10-24 22:48:46,767 - pinecone_plugin_interface.logging - INFO - Looking for plugins in pinecone_plugins.inference
2024-10-24 22:48:46,775 - pinecone_plugin_interface.logging - INFO - Installing plugin inference into Pinecone
2024-10-24 22:48:47,635 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"indexes":[{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}]}'
2024-10-24 22:48:47,638 - root - INFO - Creating new Pinecone index: book-embeddings
2024-10-24 22:48:50,013 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"error":{"code":"ALREADY_EXISTS","message":"Resource  already exists"},"status":409}'
2024-10-24 22:48:50,014 - root - INFO - Index book-embeddings already exists. Using existing index.
2024-10-24 22:48:50,370 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}'
2024-10-24 22:48:51,200 - root - INFO - Splitting text into chunks (size: 300, overlap: 150)
2024-10-24 22:48:51,202 - root - INFO - Created 199 chunks
2024-10-24 22:48:51,203 - pinecone_plugin_interface.logging - INFO - Discovering subpackages in _NamespacePath(['/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/pinecone_plugins'])
2024-10-24 22:48:51,203 - pinecone_plugin_interface.logging - INFO - Looking for plugins in pinecone_plugins.inference
2024-10-24 22:48:51,203 - pinecone_plugin_interface.logging - INFO - Installing plugin inference into Pinecone
2024-10-24 22:48:51,519 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"indexes":[{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}]}'
2024-10-24 22:48:51,520 - root - INFO - Creating new Pinecone index: book-embeddings
2024-10-24 22:48:53,862 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"error":{"code":"ALREADY_EXISTS","message":"Resource  already exists"},"status":409}'
2024-10-24 22:48:53,863 - root - INFO - Index book-embeddings already exists. Using existing index.
2024-10-24 22:48:53,920 - root - INFO - Processing RAG query: What was the model year of the Ford Pinto involved in the accident?
2024-10-24 22:48:53,922 - pinecone_plugin_interface.logging - INFO - Discovering subpackages in _NamespacePath(['/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/pinecone_plugins'])
2024-10-24 22:48:53,922 - pinecone_plugin_interface.logging - INFO - Looking for plugins in pinecone_plugins.inference
2024-10-24 22:48:53,923 - pinecone_plugin_interface.logging - INFO - Installing plugin inference into Pinecone
2024-10-24 22:48:54,429 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"indexes":[{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}]}'
2024-10-24 22:48:54,430 - root - INFO - Creating new Pinecone index: book-embeddings
2024-10-24 22:48:56,484 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"error":{"code":"ALREADY_EXISTS","message":"Resource  already exists"},"status":409}'
2024-10-24 22:48:56,484 - root - INFO - Index book-embeddings already exists. Using existing index.
2024-10-24 22:48:56,486 - pinecone_plugin_interface.logging - INFO - Discovering subpackages in _NamespacePath(['/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/pinecone_plugins'])
2024-10-24 22:48:56,487 - pinecone_plugin_interface.logging - INFO - Looking for plugins in pinecone_plugins.inference
2024-10-24 22:48:56,487 - pinecone_plugin_interface.logging - INFO - Installing plugin inference into Pinecone
2024-10-24 22:48:57,669 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"indexes":[{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}]}'
2024-10-24 22:48:57,670 - root - INFO - Creating new Pinecone index: book-embeddings
2024-10-24 22:48:58,284 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"error":{"code":"ALREADY_EXISTS","message":"Resource  already exists"},"status":409}'
2024-10-24 22:48:58,285 - root - INFO - Index book-embeddings already exists. Using existing index.
2024-10-24 22:48:59,294 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"upsertedCount":1}'
2024-10-24 22:49:00,152 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"results":[],"matches":[{"id":"381ff60ffe74542b971aeaa2148a488c","score":1.00000799,"values":[],"metadata":{"text":"What was the model year of the Ford Pinto involved in the accident?"}},{"id":"0","score":1,"values":[],"metadata":{"chunk":"What was the model year of the Ford Pinto involved in the accident?"}},{"id":"7c25ca08798757a5d15caefbcf6d0c6a","score":0.699642897,"values":[],"metadata":{"text":"How did Ford\'s \'rush\' development of the Pinto affect its safety design?"}},{"id":"2ce3084ae5e281f5816fb0b3e11c5cf6","score":0.677877963,"values":[],"metadata":{"text":"How did Ford\'s crash tests reveal the Pinto\'s fuel system vulnerabilities?"}},{"id":"032d6d9f7cf883f483068a2d1d3ea7d0","score":0.649451852,"values":[],"metadata":{"text":"What was the speed of the Ford Galaxie at the moment of impact with the Pinto?"}},{"id":"34d53f2e1e7ce76e0573ae33e295b16d","score":0.640364826,"values":[],"metadata":{"text":"What evidence suggested that Ford was aware of the Pinto\'s safety issues before its release?"}},{"id":"6baf920636bb0e7a14c37c499f0a135f","score":0.591545105,"values":[],"metadata":{"text":"What factors influenced the placement of the fuel tank in the Ford Pinto?"}},{"id":"51bf0066086639adb0a494086a5121ce","score":0.587939262,"values":[],"metadata":{"text":"Who was the executive vice president of Ford who conceived the Pinto project?"}},{"id":"01e59f8ef084bd6a4d99f9067667d768","score":0.578649342,"values":[],"metadata":{"text":"What was the weight target for the Pinto set by Ford?"}},{"id":"4af6bd37a7ac7aa66d6fa4606aaa82b0","score":0.577010334,"values":[],"metadata":{"text":"What was the estimated cost to fix the Pinto\'s fuel tank design, and how did Ford justify not implementing it?"}}],"namespace":"","usage":{"readUnits":6}}'
2024-10-24 22:49:00,156 - root - INFO - Generated answer: This is a mock answer
2024-10-24 22:49:00,190 - rag_results - INFO - 
Q: What was the model year of the Ford Pinto involved in the accident?
2024-10-24 22:49:00,190 - rag_results - INFO - Expected A: 1972
2024-10-24 22:49:00,190 - rag_results - INFO - System A: This is a mock answer
2024-10-24 22:49:00,190 - rag_results - INFO - Is correct: False
2024-10-24 22:49:00,190 - rag_results - INFO - --------------------------------------------------
2024-10-24 22:49:00,284 - root - INFO - Test test_qa_system[qa_pair0] took 6.36 seconds
2024-10-24 22:50:53,889 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-24 22:50:53,890 - httpx - DEBUG - load_verify_locations cafile='/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-24 22:50:53,897 - pinecone_plugin_interface.logging - INFO - Discovering subpackages in _NamespacePath(['/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/pinecone_plugins'])
2024-10-24 22:50:53,897 - pinecone_plugin_interface.logging - INFO - Looking for plugins in pinecone_plugins.inference
2024-10-24 22:50:53,905 - pinecone_plugin_interface.logging - INFO - Installing plugin inference into Pinecone
2024-10-24 22:50:54,229 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"indexes":[{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}]}'
2024-10-24 22:50:54,231 - root - INFO - Creating new Pinecone index: book-embeddings
2024-10-24 22:50:56,865 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"error":{"code":"ALREADY_EXISTS","message":"Resource  already exists"},"status":409}'
2024-10-24 22:50:56,865 - root - INFO - Index book-embeddings already exists. Using existing index.
2024-10-24 22:50:57,051 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}'
2024-10-24 22:53:14,623 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-24 22:53:14,624 - httpx - DEBUG - load_verify_locations cafile='/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-24 22:53:14,631 - pinecone_plugin_interface.logging - INFO - Discovering subpackages in _NamespacePath(['/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/pinecone_plugins'])
2024-10-24 22:53:14,631 - pinecone_plugin_interface.logging - INFO - Looking for plugins in pinecone_plugins.inference
2024-10-24 22:53:14,640 - pinecone_plugin_interface.logging - INFO - Installing plugin inference into Pinecone
2024-10-24 22:53:15,656 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"indexes":[{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}]}'
2024-10-24 22:53:15,656 - root - INFO - Creating new Pinecone index: book-embeddings
2024-10-24 22:53:15,923 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"error":{"code":"ALREADY_EXISTS","message":"Resource  already exists"},"status":409}'
2024-10-24 22:53:15,924 - root - INFO - Index book-embeddings already exists. Using existing index.
2024-10-24 22:53:16,158 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}'
2024-10-24 22:53:16,165 - root - INFO - Starting the RAG system
2024-10-24 22:53:54,597 - root - INFO - Loading book from: tests/data/test.pdf
2024-10-24 22:53:54,600 - root - INFO - Starting to process book content
2024-10-24 22:53:54,600 - root - INFO - Preprocessing text content
2024-10-24 22:53:54,945 - root - INFO - Extracted 0 dates, 0 named entities, and 1 key phrases from the text
2024-10-24 22:53:54,945 - root - INFO - Splitting text into chunks (size: 300, overlap: 150)
2024-10-24 22:53:54,945 - root - INFO - Created 1 chunks
2024-10-24 22:53:54,945 - root - INFO - Text preprocessed. Number of chunks: 1
2024-10-24 22:53:54,945 - pinecone_plugin_interface.logging - INFO - Discovering subpackages in _NamespacePath(['/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/pinecone_plugins'])
2024-10-24 22:53:54,946 - pinecone_plugin_interface.logging - INFO - Looking for plugins in pinecone_plugins.inference
2024-10-24 22:53:54,946 - pinecone_plugin_interface.logging - INFO - Installing plugin inference into Pinecone
2024-10-24 22:53:55,260 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"indexes":[{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}]}'
2024-10-24 22:53:55,260 - root - INFO - Creating new Pinecone index: book-embeddings
2024-10-24 22:53:55,730 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"error":{"code":"ALREADY_EXISTS","message":"Resource  already exists"},"status":409}'
2024-10-24 22:53:55,730 - root - INFO - Index book-embeddings already exists. Using existing index.
2024-10-24 22:53:55,733 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x12ab4fb00>, 'json_data': {'input': ['tests/data/test.pdf'], 'model': 'text-embedding-3-small', 'encoding_format': 'base64'}}
2024-10-24 22:53:55,766 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/embeddings
2024-10-24 22:53:55,766 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-24 22:53:55,902 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x12ad248f0>
2024-10-24 22:53:55,904 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x12a97f7d0> server_hostname='api.openai.com' timeout=5.0
2024-10-24 22:53:55,946 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x12a9a6210>
2024-10-24 22:53:55,946 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-24 22:53:55,947 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-10-24 22:53:55,947 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-24 22:53:55,947 - httpcore.http11 - DEBUG - send_request_body.complete
2024-10-24 22:53:55,947 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-24 22:53:56,182 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 24 Oct 2024 21:53:56 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-allow-origin', b'*'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-model', b'text-embedding-3-small'), (b'openai-organization', b'uinside'), (b'openai-processing-ms', b'35'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'5000000'), (b'x-ratelimit-remaining-requests', b'9999'), (b'x-ratelimit-remaining-tokens', b'4999996'), (b'x-ratelimit-reset-requests', b'6ms'), (b'x-ratelimit-reset-tokens', b'0s'), (b'x-request-id', b'req_589bf42deca44b6afd1b1fa224244951'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=sgOiz5IS9iE4SmqzBX.PpcK2AgQcYJUl7_GWV0I2Q48-1729806836-1.0.1.1-XwYH7mM46Ijn_7IWr1ftp_NFJV85n25rYqPJ0egJfpGPEWOUvJD2N58Fs6lkHlCPcH6m8UnmJEau6kIPf1gPJQ; path=/; expires=Thu, 24-Oct-24 22:23:56 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=Dm9HXmNA8UFVOwf2o75q2bUnXOHn2TIevzelVNu5KsA-1729806836306-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d7d33d5b9a894fb-LIS'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-24 22:53:56,185 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2024-10-24 22:53:56,186 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-24 22:53:56,189 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-10-24 22:53:56,191 - httpcore.http11 - DEBUG - response_closed.started
2024-10-24 22:53:56,191 - httpcore.http11 - DEBUG - response_closed.complete
2024-10-24 22:53:56,191 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/embeddings "200 OK" Headers([('date', 'Thu, 24 Oct 2024 21:53:56 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-allow-origin', '*'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-model', 'text-embedding-3-small'), ('openai-organization', 'uinside'), ('openai-processing-ms', '35'), ('openai-version', '2020-10-01'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('x-ratelimit-limit-requests', '10000'), ('x-ratelimit-limit-tokens', '5000000'), ('x-ratelimit-remaining-requests', '9999'), ('x-ratelimit-remaining-tokens', '4999996'), ('x-ratelimit-reset-requests', '6ms'), ('x-ratelimit-reset-tokens', '0s'), ('x-request-id', 'req_589bf42deca44b6afd1b1fa224244951'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=sgOiz5IS9iE4SmqzBX.PpcK2AgQcYJUl7_GWV0I2Q48-1729806836-1.0.1.1-XwYH7mM46Ijn_7IWr1ftp_NFJV85n25rYqPJ0egJfpGPEWOUvJD2N58Fs6lkHlCPcH6m8UnmJEau6kIPf1gPJQ; path=/; expires=Thu, 24-Oct-24 22:23:56 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('x-content-type-options', 'nosniff'), ('set-cookie', '_cfuvid=Dm9HXmNA8UFVOwf2o75q2bUnXOHn2TIevzelVNu5KsA-1729806836306-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('server', 'cloudflare'), ('cf-ray', '8d7d33d5b9a894fb-LIS'), ('content-encoding', 'gzip'), ('alt-svc', 'h3=":443"; ma=86400')])
2024-10-24 22:53:56,191 - openai._base_client - DEBUG - request_id: req_589bf42deca44b6afd1b1fa224244951
2024-10-24 22:53:57,148 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"upsertedCount":1}'
2024-10-24 22:53:57,320 - root - INFO - Saving 1 chunks, their embeddings, and processed text to data/embeddings/35c83be7eecaf97ed63d33d440f620b3_chunks_embeddings.pkl.
2024-10-24 22:53:57,322 - root - INFO - Data saved to data/embeddings/35c83be7eecaf97ed63d33d440f620b3_chunks_embeddings.pkl.
2024-10-24 22:53:57,322 - root - INFO - Book data created. Number of chunks: 1
2024-10-24 22:53:57,322 - root - INFO - Book loaded and preprocessed. Text split into 1 chunks
2024-10-24 22:54:08,051 - root - INFO - Received query:  ?
2024-10-24 22:54:08,052 - root - ERROR - Error generating answer: rag_query() missing 1 required positional argument: 'openai_service'
2024-10-24 22:59:46,436 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-24 22:59:46,437 - httpx - DEBUG - load_verify_locations cafile='/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-24 22:59:46,444 - pinecone_plugin_interface.logging - INFO - Discovering subpackages in _NamespacePath(['/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/pinecone_plugins'])
2024-10-24 22:59:46,444 - pinecone_plugin_interface.logging - INFO - Looking for plugins in pinecone_plugins.inference
2024-10-24 22:59:46,453 - pinecone_plugin_interface.logging - INFO - Installing plugin inference into Pinecone
2024-10-24 22:59:46,861 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"indexes":[{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}]}'
2024-10-24 22:59:46,863 - root - INFO - Creating new Pinecone index: book-embeddings
2024-10-24 22:59:47,296 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"error":{"code":"ALREADY_EXISTS","message":"Resource  already exists"},"status":409}'
2024-10-24 22:59:47,297 - root - INFO - Index book-embeddings already exists. Using existing index.
2024-10-24 22:59:47,496 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}'
2024-10-24 22:59:47,498 - root - INFO - Starting the RAG system
2024-10-24 23:00:04,865 - root - INFO - Loading book from: tests/data/test.docx
2024-10-24 23:00:04,866 - root - INFO - Starting to process book content
2024-10-24 23:00:04,866 - root - INFO - Preprocessing text content
2024-10-24 23:00:05,158 - root - INFO - Extracted 0 dates, 0 named entities, and 1 key phrases from the text
2024-10-24 23:00:05,158 - root - INFO - Splitting text into chunks (size: 300, overlap: 150)
2024-10-24 23:00:05,158 - root - INFO - Created 1 chunks
2024-10-24 23:00:05,158 - root - INFO - Text preprocessed. Number of chunks: 1
2024-10-24 23:00:05,158 - pinecone_plugin_interface.logging - INFO - Discovering subpackages in _NamespacePath(['/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/pinecone_plugins'])
2024-10-24 23:00:05,158 - pinecone_plugin_interface.logging - INFO - Looking for plugins in pinecone_plugins.inference
2024-10-24 23:00:05,159 - pinecone_plugin_interface.logging - INFO - Installing plugin inference into Pinecone
2024-10-24 23:00:06,419 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"indexes":[{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}]}'
2024-10-24 23:00:06,420 - root - INFO - Creating new Pinecone index: book-embeddings
2024-10-24 23:00:06,777 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"error":{"code":"ALREADY_EXISTS","message":"Resource  already exists"},"status":409}'
2024-10-24 23:00:06,777 - root - INFO - Index book-embeddings already exists. Using existing index.
2024-10-24 23:00:06,779 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x113b4fa60>, 'json_data': {'input': ['tests/data/test.docx'], 'model': 'text-embedding-3-small', 'encoding_format': 'base64'}}
2024-10-24 23:00:06,815 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/embeddings
2024-10-24 23:00:06,816 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-24 23:00:06,950 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x114924080>
2024-10-24 23:00:06,950 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x11397f7d0> server_hostname='api.openai.com' timeout=5.0
2024-10-24 23:00:06,987 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x112a2a000>
2024-10-24 23:00:06,987 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-24 23:00:06,988 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-10-24 23:00:06,988 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-24 23:00:06,988 - httpcore.http11 - DEBUG - send_request_body.complete
2024-10-24 23:00:06,988 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-24 23:00:07,346 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 24 Oct 2024 22:00:07 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-allow-origin', b'*'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-model', b'text-embedding-3-small'), (b'openai-organization', b'uinside'), (b'openai-processing-ms', b'134'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'5000000'), (b'x-ratelimit-remaining-requests', b'9999'), (b'x-ratelimit-remaining-tokens', b'4999994'), (b'x-ratelimit-reset-requests', b'6ms'), (b'x-ratelimit-reset-tokens', b'0s'), (b'x-request-id', b'req_c40f3598dda3aeec3665d3716c1bda0f'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=munTpX_6yUPeFjiqDGNXhpHxK2r4J5xT7T_QybblXgw-1729807207-1.0.1.1-Bslqj_4UVx4ZR6HEJ7g8IpafNE71O4f4.zwJY6179kT.SJu56xitLJBb6buMGX39EkSm9ptvgDcGTDevCRgtIg; path=/; expires=Thu, 24-Oct-24 22:30:07 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=ED62IBqvfppYcajiSIbeZeU8ksGL_cPn35k03TZbhQI-1729807207415-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d7d3ce4bd25e3b0-LIS'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-24 23:00:07,349 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2024-10-24 23:00:07,349 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-24 23:00:07,353 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-10-24 23:00:07,353 - httpcore.http11 - DEBUG - response_closed.started
2024-10-24 23:00:07,353 - httpcore.http11 - DEBUG - response_closed.complete
2024-10-24 23:00:07,354 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/embeddings "200 OK" Headers([('date', 'Thu, 24 Oct 2024 22:00:07 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-allow-origin', '*'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-model', 'text-embedding-3-small'), ('openai-organization', 'uinside'), ('openai-processing-ms', '134'), ('openai-version', '2020-10-01'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('x-ratelimit-limit-requests', '10000'), ('x-ratelimit-limit-tokens', '5000000'), ('x-ratelimit-remaining-requests', '9999'), ('x-ratelimit-remaining-tokens', '4999994'), ('x-ratelimit-reset-requests', '6ms'), ('x-ratelimit-reset-tokens', '0s'), ('x-request-id', 'req_c40f3598dda3aeec3665d3716c1bda0f'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=munTpX_6yUPeFjiqDGNXhpHxK2r4J5xT7T_QybblXgw-1729807207-1.0.1.1-Bslqj_4UVx4ZR6HEJ7g8IpafNE71O4f4.zwJY6179kT.SJu56xitLJBb6buMGX39EkSm9ptvgDcGTDevCRgtIg; path=/; expires=Thu, 24-Oct-24 22:30:07 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('x-content-type-options', 'nosniff'), ('set-cookie', '_cfuvid=ED62IBqvfppYcajiSIbeZeU8ksGL_cPn35k03TZbhQI-1729807207415-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('server', 'cloudflare'), ('cf-ray', '8d7d3ce4bd25e3b0-LIS'), ('content-encoding', 'gzip'), ('alt-svc', 'h3=":443"; ma=86400')])
2024-10-24 23:00:07,354 - openai._base_client - DEBUG - request_id: req_c40f3598dda3aeec3665d3716c1bda0f
2024-10-24 23:00:08,336 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"upsertedCount":1}'
2024-10-24 23:00:08,544 - root - INFO - Saving 1 chunks, their embeddings, and processed text to data/embeddings/e4d91ac66e5f5558df574c83384c8ecd_chunks_embeddings.pkl.
2024-10-24 23:00:08,545 - root - INFO - Data saved to data/embeddings/e4d91ac66e5f5558df574c83384c8ecd_chunks_embeddings.pkl.
2024-10-24 23:00:08,545 - root - INFO - Book data created. Number of chunks: 1
2024-10-24 23:00:08,545 - root - INFO - Book loaded and preprocessed. Text split into 1 chunks
2024-10-24 23:00:19,301 - root - INFO - Received query:  ?
2024-10-24 23:00:19,302 - root - ERROR - Error generating answer: rag_query() missing 1 required positional argument: 'openai_service'
2024-10-24 23:06:24,338 - root - INFO - Received query: ?
2024-10-24 23:06:24,343 - root - ERROR - Error generating answer: rag_query() missing 1 required positional argument: 'openai_service'
2024-10-24 23:06:37,488 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-24 23:06:37,489 - httpx - DEBUG - load_verify_locations cafile='/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-24 23:06:37,496 - pinecone_plugin_interface.logging - INFO - Discovering subpackages in _NamespacePath(['/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/pinecone_plugins'])
2024-10-24 23:06:37,496 - pinecone_plugin_interface.logging - INFO - Looking for plugins in pinecone_plugins.inference
2024-10-24 23:06:37,505 - pinecone_plugin_interface.logging - INFO - Installing plugin inference into Pinecone
2024-10-24 23:06:37,966 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"indexes":[{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}]}'
2024-10-24 23:06:37,967 - root - INFO - Creating new Pinecone index: book-embeddings
2024-10-24 23:06:38,463 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"error":{"code":"ALREADY_EXISTS","message":"Resource  already exists"},"status":409}'
2024-10-24 23:06:38,463 - root - INFO - Index book-embeddings already exists. Using existing index.
2024-10-24 23:06:38,675 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}'
2024-10-24 23:06:38,679 - root - INFO - Starting the RAG system
2024-10-24 23:07:08,880 - root - INFO - Loading book from: tests/data/test.odt
2024-10-24 23:07:08,881 - root - INFO - Starting to process book content
2024-10-24 23:07:08,881 - root - INFO - Preprocessing text content
2024-10-24 23:07:09,176 - root - INFO - Extracted 0 dates, 0 named entities, and 1 key phrases from the text
2024-10-24 23:07:09,176 - root - INFO - Splitting text into chunks (size: 300, overlap: 150)
2024-10-24 23:07:09,176 - root - INFO - Created 1 chunks
2024-10-24 23:07:09,176 - root - INFO - Text preprocessed. Number of chunks: 1
2024-10-24 23:07:09,177 - pinecone_plugin_interface.logging - INFO - Discovering subpackages in _NamespacePath(['/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/pinecone_plugins'])
2024-10-24 23:07:09,177 - pinecone_plugin_interface.logging - INFO - Looking for plugins in pinecone_plugins.inference
2024-10-24 23:07:09,177 - pinecone_plugin_interface.logging - INFO - Installing plugin inference into Pinecone
2024-10-24 23:07:09,494 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"indexes":[{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}]}'
2024-10-24 23:07:09,494 - root - INFO - Creating new Pinecone index: book-embeddings
2024-10-24 23:07:09,848 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"error":{"code":"ALREADY_EXISTS","message":"Resource  already exists"},"status":409}'
2024-10-24 23:07:09,849 - root - INFO - Index book-embeddings already exists. Using existing index.
2024-10-24 23:07:09,852 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x1248539c0>, 'json_data': {'input': ['tests/data/test.odt'], 'model': 'text-embedding-3-small', 'encoding_format': 'base64'}}
2024-10-24 23:07:09,893 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/embeddings
2024-10-24 23:07:09,893 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-24 23:07:10,026 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x124a24380>
2024-10-24 23:07:10,026 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x11f3337d0> server_hostname='api.openai.com' timeout=5.0
2024-10-24 23:07:10,063 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x124a25280>
2024-10-24 23:07:10,064 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-10-24 23:07:10,064 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-10-24 23:07:10,064 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-10-24 23:07:10,064 - httpcore.http11 - DEBUG - send_request_body.complete
2024-10-24 23:07:10,064 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-10-24 23:07:10,403 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 24 Oct 2024 22:07:10 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-allow-origin', b'*'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-model', b'text-embedding-3-small'), (b'openai-organization', b'uinside'), (b'openai-processing-ms', b'106'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'5000000'), (b'x-ratelimit-remaining-requests', b'9999'), (b'x-ratelimit-remaining-tokens', b'4999995'), (b'x-ratelimit-reset-requests', b'6ms'), (b'x-ratelimit-reset-tokens', b'0s'), (b'x-request-id', b'req_ea5e4769ec3b8c42ff6aa597a5413df3'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=VOm9jrc1YjMpOFE4QfRBcmZkMlCo80igcDJA05RBQR4-1729807630-1.0.1.1-jGNajBoAoE5WtjVA3fqj19QVx4LXH4h_C.vM0sipUZ0_4QDLVBj0QNqN3szcHXYIcW_tyaXXnvLt30xbimNShQ; path=/; expires=Thu, 24-Oct-24 22:37:10 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=2.FvMGhMkjipV3d_thG2o2vE7gbxc_5jBib_x97qn.E-1729807630535-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d7d4738e84de3b4-LIS'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-24 23:07:10,405 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2024-10-24 23:07:10,406 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-10-24 23:07:10,456 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-10-24 23:07:10,456 - httpcore.http11 - DEBUG - response_closed.started
2024-10-24 23:07:10,456 - httpcore.http11 - DEBUG - response_closed.complete
2024-10-24 23:07:10,456 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/embeddings "200 OK" Headers([('date', 'Thu, 24 Oct 2024 22:07:10 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-allow-origin', '*'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-model', 'text-embedding-3-small'), ('openai-organization', 'uinside'), ('openai-processing-ms', '106'), ('openai-version', '2020-10-01'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('x-ratelimit-limit-requests', '10000'), ('x-ratelimit-limit-tokens', '5000000'), ('x-ratelimit-remaining-requests', '9999'), ('x-ratelimit-remaining-tokens', '4999995'), ('x-ratelimit-reset-requests', '6ms'), ('x-ratelimit-reset-tokens', '0s'), ('x-request-id', 'req_ea5e4769ec3b8c42ff6aa597a5413df3'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=VOm9jrc1YjMpOFE4QfRBcmZkMlCo80igcDJA05RBQR4-1729807630-1.0.1.1-jGNajBoAoE5WtjVA3fqj19QVx4LXH4h_C.vM0sipUZ0_4QDLVBj0QNqN3szcHXYIcW_tyaXXnvLt30xbimNShQ; path=/; expires=Thu, 24-Oct-24 22:37:10 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('x-content-type-options', 'nosniff'), ('set-cookie', '_cfuvid=2.FvMGhMkjipV3d_thG2o2vE7gbxc_5jBib_x97qn.E-1729807630535-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('server', 'cloudflare'), ('cf-ray', '8d7d4738e84de3b4-LIS'), ('content-encoding', 'gzip'), ('alt-svc', 'h3=":443"; ma=86400')])
2024-10-24 23:07:10,456 - openai._base_client - DEBUG - request_id: req_ea5e4769ec3b8c42ff6aa597a5413df3
2024-10-24 23:07:11,505 - pinecone.core.openapi.shared.rest - DEBUG - response body: b'{"upsertedCount":1}'
2024-10-24 23:07:11,700 - root - INFO - Saving 1 chunks, their embeddings, and processed text to data/embeddings/6ee7dca7817d3b2f28a88d5e7e6121f0_chunks_embeddings.pkl.
2024-10-24 23:07:11,701 - root - INFO - Data saved to data/embeddings/6ee7dca7817d3b2f28a88d5e7e6121f0_chunks_embeddings.pkl.
2024-10-24 23:07:11,701 - root - INFO - Book data created. Number of chunks: 1
2024-10-24 23:07:11,701 - root - INFO - Book loaded and preprocessed. Text split into 1 chunks
2024-10-24 23:07:22,491 - root - INFO - Received query:   ?
2024-10-24 23:07:22,491 - root - ERROR - An error occurred: name 'openai_service' is not defined
2024-10-24 23:07:22,491 - root - INFO - Exiting the RAG system
2024-10-24 23:07:22,584 - httpcore.connection - DEBUG - close.started
2024-10-24 23:07:22,584 - httpcore.connection - DEBUG - close.complete
2024-10-24 23:10:06,340 - httpx - DEBUG - _config.py:82 - load_ssl_context - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-24 23:10:06,341 - httpx - DEBUG - _config.py:148 - load_ssl_context_verify - load_verify_locations cafile='/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-24 23:10:06,347 - pinecone_plugin_interface.logging - INFO - discover_namespace_packages.py:12 - discover_subpackages - Discovering subpackages in _NamespacePath(['/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/pinecone_plugins'])
2024-10-24 23:10:06,348 - pinecone_plugin_interface.logging - INFO - discover_plugins.py:9 - discover_plugins - Looking for plugins in pinecone_plugins.inference
2024-10-24 23:10:06,356 - pinecone_plugin_interface.logging - INFO - installation.py:10 - install_plugins - Installing plugin inference into Pinecone
2024-10-24 23:10:06,831 - pinecone.core.openapi.shared.rest - DEBUG - rest.py:264 - request - response body: b'{"indexes":[{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}]}'
2024-10-24 23:10:06,832 - root - INFO - pinecone_manager.py:72 - _initialize - Creating new Pinecone index: book-embeddings
2024-10-24 23:10:07,545 - pinecone.core.openapi.shared.rest - DEBUG - rest.py:264 - request - response body: b'{"error":{"code":"ALREADY_EXISTS","message":"Resource  already exists"},"status":409}'
2024-10-24 23:10:07,546 - root - INFO - pinecone_manager.py:86 - _initialize - Index book-embeddings already exists. Using existing index.
2024-10-24 23:10:07,852 - pinecone.core.openapi.shared.rest - DEBUG - rest.py:264 - request - response body: b'{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}'
2024-10-24 23:10:07,859 - root - INFO - cli.py:54 - run_cli - Starting the RAG system
2024-10-24 23:10:11,888 - root - INFO - cli.py:62 - run_cli - Loading book from: tests/data/test.odt
2024-10-24 23:10:11,889 - root - INFO - cli.py:25 - load_and_process_book - Starting to process book content
2024-10-24 23:10:11,890 - root - INFO - text_processing.py:75 - load_and_preprocess_text - Preprocessing text content
2024-10-24 23:10:12,232 - root - INFO - text_processing.py:81 - load_and_preprocess_text - Extracted 0 dates, 0 named entities, and 1 key phrases from the text
2024-10-24 23:10:12,232 - root - INFO - text_processing.py:93 - split_into_chunks - Splitting text into chunks (size: 300, overlap: 150)
2024-10-24 23:10:12,232 - root - INFO - text_processing.py:103 - split_into_chunks - Created 1 chunks
2024-10-24 23:10:12,232 - root - INFO - cli.py:28 - load_and_process_book - Text preprocessed. Number of chunks: 1
2024-10-24 23:10:12,232 - pinecone_plugin_interface.logging - INFO - discover_namespace_packages.py:12 - discover_subpackages - Discovering subpackages in _NamespacePath(['/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/pinecone_plugins'])
2024-10-24 23:10:12,232 - pinecone_plugin_interface.logging - INFO - discover_plugins.py:9 - discover_plugins - Looking for plugins in pinecone_plugins.inference
2024-10-24 23:10:12,233 - pinecone_plugin_interface.logging - INFO - installation.py:10 - install_plugins - Installing plugin inference into Pinecone
2024-10-24 23:10:12,538 - pinecone.core.openapi.shared.rest - DEBUG - rest.py:264 - request - response body: b'{"indexes":[{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}]}'
2024-10-24 23:10:12,539 - root - INFO - pinecone_manager.py:72 - _initialize - Creating new Pinecone index: book-embeddings
2024-10-24 23:10:12,973 - pinecone.core.openapi.shared.rest - DEBUG - rest.py:264 - request - response body: b'{"error":{"code":"ALREADY_EXISTS","message":"Resource  already exists"},"status":409}'
2024-10-24 23:10:12,973 - root - INFO - pinecone_manager.py:86 - _initialize - Index book-embeddings already exists. Using existing index.
2024-10-24 23:10:13,911 - pinecone.core.openapi.shared.rest - DEBUG - rest.py:264 - request - response body: b'{"upsertedCount":1}'
2024-10-24 23:10:14,101 - root - INFO - embedding.py:46 - save_chunks_and_embeddings - Saving 1 chunks, their embeddings, and processed text to data/embeddings/6ee7dca7817d3b2f28a88d5e7e6121f0_chunks_embeddings.pkl.
2024-10-24 23:10:14,103 - root - INFO - embedding.py:49 - save_chunks_and_embeddings - Data saved to data/embeddings/6ee7dca7817d3b2f28a88d5e7e6121f0_chunks_embeddings.pkl.
2024-10-24 23:10:14,103 - root - INFO - cli.py:38 - load_and_process_book - Book data created. Number of chunks: 1
2024-10-24 23:10:14,103 - root - INFO - cli.py:64 - run_cli - Book loaded and preprocessed. Text split into 1 chunks
2024-10-24 23:10:23,415 - root - INFO - cli.py:74 - run_cli - Received query: ?
2024-10-24 23:10:23,416 - root - ERROR - cli.py:82 - run_cli - An error occurred: name 'openai_service' is not defined
2024-10-24 23:10:23,416 - root - INFO - cli.py:85 - run_cli - Exiting the RAG system
2024-10-24 23:12:39,242 - httpx - DEBUG - _config.py:82 - load_ssl_context - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-24 23:12:39,243 - httpx - DEBUG - _config.py:148 - load_ssl_context_verify - load_verify_locations cafile='/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-24 23:12:39,251 - pinecone_plugin_interface.logging - INFO - discover_namespace_packages.py:12 - discover_subpackages - Discovering subpackages in _NamespacePath(['/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/pinecone_plugins'])
2024-10-24 23:12:39,252 - pinecone_plugin_interface.logging - INFO - discover_plugins.py:9 - discover_plugins - Looking for plugins in pinecone_plugins.inference
2024-10-24 23:12:39,261 - pinecone_plugin_interface.logging - INFO - installation.py:10 - install_plugins - Installing plugin inference into Pinecone
2024-10-24 23:12:39,581 - pinecone.core.openapi.shared.rest - DEBUG - rest.py:264 - request - response body: b'{"indexes":[{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}]}'
2024-10-24 23:12:39,583 - root - INFO - pinecone_manager.py:72 - _initialize - Creating new Pinecone index: book-embeddings
2024-10-24 23:12:40,799 - pinecone.core.openapi.shared.rest - DEBUG - rest.py:264 - request - response body: b'{"error":{"code":"ALREADY_EXISTS","message":"Resource  already exists"},"status":409}'
2024-10-24 23:12:40,799 - root - INFO - pinecone_manager.py:86 - _initialize - Index book-embeddings already exists. Using existing index.
2024-10-24 23:12:41,147 - pinecone.core.openapi.shared.rest - DEBUG - rest.py:264 - request - response body: b'{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}'
2024-10-24 23:12:41,150 - root - INFO - cli.py:54 - run_cli - Starting the RAG system
2024-10-24 23:13:23,254 - root - INFO - cli.py:62 - run_cli - Loading book from: tests/data/test.odt
2024-10-24 23:13:23,256 - root - INFO - cli.py:25 - load_and_process_book - Starting to process book content
2024-10-24 23:13:23,256 - root - INFO - text_processing.py:75 - load_and_preprocess_text - Preprocessing text content
2024-10-24 23:13:23,597 - root - INFO - text_processing.py:81 - load_and_preprocess_text - Extracted 0 dates, 0 named entities, and 1 key phrases from the text
2024-10-24 23:13:23,598 - root - INFO - text_processing.py:93 - split_into_chunks - Splitting text into chunks (size: 300, overlap: 150)
2024-10-24 23:13:23,598 - root - INFO - text_processing.py:103 - split_into_chunks - Created 1 chunks
2024-10-24 23:13:23,598 - root - INFO - cli.py:28 - load_and_process_book - Text preprocessed. Number of chunks: 1
2024-10-24 23:13:23,598 - pinecone_plugin_interface.logging - INFO - discover_namespace_packages.py:12 - discover_subpackages - Discovering subpackages in _NamespacePath(['/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/pinecone_plugins'])
2024-10-24 23:13:23,598 - pinecone_plugin_interface.logging - INFO - discover_plugins.py:9 - discover_plugins - Looking for plugins in pinecone_plugins.inference
2024-10-24 23:13:23,598 - pinecone_plugin_interface.logging - INFO - installation.py:10 - install_plugins - Installing plugin inference into Pinecone
2024-10-24 23:13:23,986 - pinecone.core.openapi.shared.rest - DEBUG - rest.py:264 - request - response body: b'{"indexes":[{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}]}'
2024-10-24 23:13:23,988 - root - INFO - pinecone_manager.py:72 - _initialize - Creating new Pinecone index: book-embeddings
2024-10-24 23:13:24,307 - pinecone.core.openapi.shared.rest - DEBUG - rest.py:264 - request - response body: b'{"error":{"code":"ALREADY_EXISTS","message":"Resource  already exists"},"status":409}'
2024-10-24 23:13:24,307 - root - INFO - pinecone_manager.py:86 - _initialize - Index book-embeddings already exists. Using existing index.
2024-10-24 23:13:25,254 - pinecone.core.openapi.shared.rest - DEBUG - rest.py:264 - request - response body: b'{"upsertedCount":1}'
2024-10-24 23:13:25,444 - root - INFO - embedding.py:46 - save_chunks_and_embeddings - Saving 1 chunks, their embeddings, and processed text to data/embeddings/6ee7dca7817d3b2f28a88d5e7e6121f0_chunks_embeddings.pkl.
2024-10-24 23:13:25,445 - root - INFO - embedding.py:49 - save_chunks_and_embeddings - Data saved to data/embeddings/6ee7dca7817d3b2f28a88d5e7e6121f0_chunks_embeddings.pkl.
2024-10-24 23:13:25,445 - root - INFO - cli.py:38 - load_and_process_book - Book data created. Number of chunks: 1
2024-10-24 23:13:25,445 - root - INFO - cli.py:64 - run_cli - Book loaded and preprocessed. Text split into 1 chunks
2024-10-24 23:13:47,161 - root - INFO - cli.py:74 - run_cli - Received query: ?
2024-10-24 23:13:47,162 - root - ERROR - cli.py:82 - run_cli - An error occurred: name 'openai_service' is not defined
2024-10-24 23:13:47,163 - root - INFO - cli.py:85 - run_cli - Exiting the RAG system
2024-10-24 23:19:30,918 - INFO - src/pinecone_manager.py:72 - _initialize - Creating new Pinecone index: book-embeddings
2024-10-24 23:19:31,210 - INFO - src/pinecone_manager.py:86 - _initialize - Index book-embeddings already exists. Using existing index.
2024-10-24 23:19:31,415 - INFO - src/cli.py:54 - run_cli - Starting the RAG system
2024-10-24 23:21:10,171 - INFO - src/pinecone_manager.py:72 - _initialize - Creating new Pinecone index: book-embeddings
2024-10-24 23:21:10,539 - INFO - src/pinecone_manager.py:86 - _initialize - Index book-embeddings already exists. Using existing index.
2024-10-24 23:21:10,907 - INFO - src/cli.py:54 - run_cli - Starting the RAG system
2024-10-24 23:21:14,822 - INFO - src/cli.py:65 - run_cli - Loading book from: tests/data/test.odt
2024-10-24 23:21:14,823 - INFO - src/cli.py:25 - load_and_process_book - Starting to process book content
2024-10-24 23:21:14,823 - INFO - src/text_processing.py:75 - load_and_preprocess_text - Preprocessing text content
2024-10-24 23:21:15,105 - INFO - src/text_processing.py:81 - load_and_preprocess_text - Extracted 0 dates, 0 named entities, and 1 key phrases from the text
2024-10-24 23:21:15,105 - INFO - src/text_processing.py:93 - split_into_chunks - Splitting text into chunks (size: 300, overlap: 150)
2024-10-24 23:21:15,105 - INFO - src/text_processing.py:103 - split_into_chunks - Created 1 chunks
2024-10-24 23:21:15,105 - INFO - src/cli.py:28 - load_and_process_book - Text preprocessed. Number of chunks: 1
2024-10-24 23:21:15,797 - INFO - src/pinecone_manager.py:72 - _initialize - Creating new Pinecone index: book-embeddings
2024-10-24 23:21:16,055 - INFO - src/pinecone_manager.py:86 - _initialize - Index book-embeddings already exists. Using existing index.
2024-10-24 23:21:17,145 - INFO - src/embedding.py:46 - save_chunks_and_embeddings - Saving 1 chunks, their embeddings, and processed text to data/embeddings/6ee7dca7817d3b2f28a88d5e7e6121f0_chunks_embeddings.pkl.
2024-10-24 23:21:17,146 - INFO - src/embedding.py:49 - save_chunks_and_embeddings - Data saved to data/embeddings/6ee7dca7817d3b2f28a88d5e7e6121f0_chunks_embeddings.pkl.
2024-10-24 23:21:17,146 - INFO - src/cli.py:38 - load_and_process_book - Book data created. Number of chunks: 1
2024-10-24 23:21:17,146 - INFO - src/cli.py:67 - run_cli - Book loaded and preprocessed. Text split into 1 chunks
2024-10-24 23:21:24,405 - INFO - src/cli.py:77 - run_cli - Received query:  ,
2024-10-24 23:21:24,406 - INFO - src/cli.py:43 - answer_question - Received query:  ,
2024-10-24 23:21:24,407 - INFO - src/rag.py:68 - rag_query - Processing RAG query:  ,
2024-10-24 23:21:24,726 - INFO - src/pinecone_manager.py:72 - _initialize - Creating new Pinecone index: book-embeddings
2024-10-24 23:21:24,972 - INFO - src/pinecone_manager.py:86 - _initialize - Index book-embeddings already exists. Using existing index.
2024-10-24 23:21:25,392 - INFO - src/pinecone_manager.py:72 - _initialize - Creating new Pinecone index: book-embeddings
2024-10-24 23:21:25,638 - INFO - src/pinecone_manager.py:86 - _initialize - Index book-embeddings already exists. Using existing index.
2024-10-24 23:21:28,317 - INFO - src/openai_service.py:40 - generate_answer - Generating answer for query:  ,
2024-10-24 23:21:29,626 - INFO - src/rag.py:80 - rag_query - Generated answer: The text " ," translates to "What is here," but the context does not provide any additional information or content to clarify what is being referred to. The original chunk only consists of this phrase, leaving the context and meaning unclear. We do not have further details about the subject, situation, or items being referenced.
2024-10-24 23:21:29,628 - INFO - src/cli.py:46 - answer_question - Generated answer: The text " ," translates to "What is here," but the context does not provide any additional information or content to clarify what is being referred to. The original chunk only consists of this phrase, leaving the context and meaning unclear. We do not have further details about the subject, situation, or items being referenced.
2024-10-24 23:23:10,658 - INFO - src/pinecone_manager.py:72 - _initialize - Creating new Pinecone index: book-embeddings
2024-10-24 23:23:12,341 - INFO - src/pinecone_manager.py:86 - _initialize - Index book-embeddings already exists. Using existing index.
2024-10-24 23:23:13,276 - INFO - app.py:96 - <module> - Starting Flask app on port 5001
2024-10-24 23:23:14,813 - INFO - src/pinecone_manager.py:72 - _initialize - Creating new Pinecone index: book-embeddings
2024-10-24 23:23:15,483 - INFO - src/pinecone_manager.py:86 - _initialize - Index book-embeddings already exists. Using existing index.
2024-10-24 23:23:15,802 - INFO - app.py:96 - <module> - Starting Flask app on port 5001
2024-10-24 23:24:06,127 - INFO - app.py:34 - index - Index route accessed
2024-10-24 23:24:06,129 - INFO - app.py:60 - index - Rendering index.html
2024-10-24 23:24:20,031 - INFO - app.py:34 - index - Index route accessed
2024-10-24 23:24:20,032 - INFO - app.py:36 - index - POST request received
2024-10-24 23:24:20,040 - INFO - src/file_processor.py:15 - process_file - Processing file: uploads/A_Byte_of_Python_Rus_2.01.pdf with extension: .pdf
2024-10-24 23:24:20,040 - INFO - src/file_processor.py:26 - process_file - Using processor for extension: .pdf
2024-10-24 23:24:21,175 - INFO - src/cli.py:25 - load_and_process_book - Starting to process book content
2024-10-24 23:24:21,175 - INFO - src/text_processing.py:75 - load_and_preprocess_text - Preprocessing text content
2024-10-24 23:24:25,597 - INFO - src/text_processing.py:81 - load_and_preprocess_text - Extracted 22 dates, 1232 named entities, and 5 key phrases from the text
2024-10-24 23:24:25,598 - INFO - src/text_processing.py:93 - split_into_chunks - Splitting text into chunks (size: 300, overlap: 150)
2024-10-24 23:24:25,600 - INFO - src/text_processing.py:103 - split_into_chunks - Created 183 chunks
2024-10-24 23:24:25,601 - INFO - src/cli.py:28 - load_and_process_book - Text preprocessed. Number of chunks: 183
2024-10-24 23:24:25,931 - INFO - src/pinecone_manager.py:72 - _initialize - Creating new Pinecone index: book-embeddings
2024-10-24 23:24:26,210 - INFO - src/pinecone_manager.py:86 - _initialize - Index book-embeddings already exists. Using existing index.
2024-10-24 23:25:11,189 - INFO - src/pinecone_manager.py:72 - _initialize - Creating new Pinecone index: book-embeddings
2024-10-24 23:25:11,670 - INFO - src/pinecone_manager.py:86 - _initialize - Index book-embeddings already exists. Using existing index.
2024-10-24 23:25:12,023 - INFO - app.py:96 - <module> - Starting Flask app on port 5001
2024-10-24 23:25:19,169 - INFO - src/pinecone_manager.py:72 - _initialize - Creating new Pinecone index: book-embeddings
2024-10-24 23:25:19,452 - INFO - src/pinecone_manager.py:86 - _initialize - Index book-embeddings already exists. Using existing index.
2024-10-24 23:25:19,747 - INFO - app.py:96 - <module> - Starting Flask app on port 5001
2024-10-24 23:25:34,044 - root - INFO - src/pinecone_manager.py:72 - _initialize - Creating new Pinecone index: book-embeddings
2024-10-24 23:25:34,598 - root - INFO - src/pinecone_manager.py:86 - _initialize - Index book-embeddings already exists. Using existing index.
2024-10-24 23:25:34,913 - root - INFO - app.py:96 - <module> - Starting Flask app on port 5001
2024-10-24 23:25:40,974 - root - INFO - src/pinecone_manager.py:72 - _initialize - Creating new Pinecone index: book-embeddings
2024-10-24 23:25:41,259 - root - INFO - src/pinecone_manager.py:86 - _initialize - Index book-embeddings already exists. Using existing index.
2024-10-24 23:25:41,880 - root - INFO - app.py:96 - <module> - Starting Flask app on port 5001
2024-10-24 23:25:56,962 - root - INFO - src/pinecone_manager.py:72 - _initialize - Creating new Pinecone index: book-embeddings
2024-10-24 23:25:57,225 - root - INFO - src/pinecone_manager.py:86 - _initialize - Index book-embeddings already exists. Using existing index.
2024-10-24 23:25:57,553 - root - INFO - app.py:96 - <module> - Starting Flask app on port 5001
2024-10-24 23:26:17,399 - root - INFO - src/pinecone_manager.py:72 - _initialize - Creating new Pinecone index: book-embeddings
2024-10-24 23:26:17,823 - root - INFO - src/pinecone_manager.py:86 - _initialize - Index book-embeddings already exists. Using existing index.
2024-10-24 23:26:18,262 - root - INFO - app.py:96 - <module> - Starting Flask app on port 5001
2024-10-24 23:26:19,291 - root - INFO - src/pinecone_manager.py:72 - _initialize - Creating new Pinecone index: book-embeddings
2024-10-24 23:26:19,664 - root - INFO - src/pinecone_manager.py:86 - _initialize - Index book-embeddings already exists. Using existing index.
2024-10-24 23:26:20,173 - root - INFO - app.py:96 - <module> - Starting Flask app on port 5001
2024-10-24 23:26:25,094 - root - INFO - app.py:34 - index - Index route accessed
2024-10-24 23:26:25,096 - root - INFO - app.py:60 - index - Rendering index.html
2024-10-24 23:26:25,602 - root - INFO - app.py:34 - index - Index route accessed
2024-10-24 23:26:25,602 - root - INFO - app.py:60 - index - Rendering index.html
2024-10-24 23:26:31,942 - root - INFO - app.py:34 - index - Index route accessed
2024-10-24 23:26:31,942 - root - INFO - app.py:36 - index - POST request received
2024-10-24 23:26:31,950 - root - INFO - src/file_processor.py:15 - process_file - Processing file: uploads/A_Byte_of_Python_Rus_2.01.pdf with extension: .pdf
2024-10-24 23:26:31,951 - root - INFO - src/file_processor.py:26 - process_file - Using processor for extension: .pdf
2024-10-24 23:26:32,945 - root - INFO - src/cli.py:25 - load_and_process_book - Starting to process book content
2024-10-24 23:26:32,945 - root - INFO - src/text_processing.py:75 - load_and_preprocess_text - Preprocessing text content
2024-10-24 23:26:37,389 - root - INFO - src/text_processing.py:81 - load_and_preprocess_text - Extracted 22 dates, 1232 named entities, and 5 key phrases from the text
2024-10-24 23:26:37,389 - root - INFO - src/text_processing.py:93 - split_into_chunks - Splitting text into chunks (size: 300, overlap: 150)
2024-10-24 23:26:37,391 - root - INFO - src/text_processing.py:103 - split_into_chunks - Created 183 chunks
2024-10-24 23:26:37,392 - root - INFO - src/cli.py:28 - load_and_process_book - Text preprocessed. Number of chunks: 183
2024-10-24 23:26:37,725 - root - INFO - src/pinecone_manager.py:72 - _initialize - Creating new Pinecone index: book-embeddings
2024-10-24 23:26:38,037 - root - INFO - src/pinecone_manager.py:86 - _initialize - Index book-embeddings already exists. Using existing index.
2024-10-24 23:27:40,146 - root - INFO - src/embedding.py:46 - save_chunks_and_embeddings - Saving 183 chunks, their embeddings, and processed text to data/embeddings/2874edd83f926b01da779ebb81f68a45_chunks_embeddings.pkl.
2024-10-24 23:27:40,152 - root - INFO - src/embedding.py:49 - save_chunks_and_embeddings - Data saved to data/embeddings/2874edd83f926b01da779ebb81f68a45_chunks_embeddings.pkl.
2024-10-24 23:27:40,153 - root - INFO - src/cli.py:38 - load_and_process_book - Book data created. Number of chunks: 183
2024-10-24 23:27:40,153 - root - INFO - app.py:53 - index - Book data loaded: 183 chunks
2024-10-24 23:29:19,323 - root - INFO - app.py:34 - index - Index route accessed
2024-10-24 23:29:19,324 - root - INFO - app.py:36 - index - POST request received
2024-10-24 23:29:19,327 - root - WARNING - app.py:38 - index - No file part in the request
2024-10-24 23:30:34,898 - root - INFO - src/pinecone_manager.py:72 - _initialize - Creating new Pinecone index: book-embeddings
2024-10-24 23:30:35,307 - root - INFO - src/pinecone_manager.py:86 - _initialize - Index book-embeddings already exists. Using existing index.
2024-10-24 23:30:35,674 - root - INFO - src/cli.py:54 - run_cli - Starting the RAG system
2024-10-24 23:31:15,304 - root - INFO - src/pinecone_manager.py:72 - _initialize - Creating new Pinecone index: book-embeddings
2024-10-24 23:31:19,092 - root - INFO - src/pinecone_manager.py:86 - _initialize - Index book-embeddings already exists. Using existing index.
2024-10-24 23:31:19,320 - root - INFO - src/cli.py:54 - run_cli - Starting the RAG system
2024-10-24 23:34:53,274 - httpx - DEBUG - _config.py:82 - load_ssl_context - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-24 23:34:53,275 - httpx - DEBUG - _config.py:148 - load_ssl_context_verify - load_verify_locations cafile='/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-24 23:34:53,282 - pinecone_plugin_interface.logging - INFO - discover_namespace_packages.py:12 - discover_subpackages - Discovering subpackages in _NamespacePath(['/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/pinecone_plugins'])
2024-10-24 23:34:53,283 - pinecone_plugin_interface.logging - INFO - discover_plugins.py:9 - discover_plugins - Looking for plugins in pinecone_plugins.inference
2024-10-24 23:34:53,292 - pinecone_plugin_interface.logging - INFO - installation.py:10 - install_plugins - Installing plugin inference into Pinecone
2024-10-24 23:34:54,979 - pinecone.core.openapi.shared.rest - DEBUG - rest.py:264 - request - response body: b'{"indexes":[{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}]}'
2024-10-24 23:34:54,982 - root - INFO - pinecone_manager.py:72 - _initialize - Creating new Pinecone index: book-embeddings
2024-10-24 23:34:56,579 - pinecone.core.openapi.shared.rest - DEBUG - rest.py:264 - request - response body: b'{"error":{"code":"ALREADY_EXISTS","message":"Resource  already exists"},"status":409}'
2024-10-24 23:34:56,579 - root - INFO - pinecone_manager.py:86 - _initialize - Index book-embeddings already exists. Using existing index.
2024-10-24 23:34:56,812 - pinecone.core.openapi.shared.rest - DEBUG - rest.py:264 - request - response body: b'{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}'
2024-10-24 23:34:56,815 - root - INFO - cli.py:54 - run_cli - Starting the RAG system
2024-10-24 23:34:56,816 - httpx - DEBUG - _config.py:82 - load_ssl_context - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-24 23:34:56,817 - httpx - DEBUG - _config.py:148 - load_ssl_context_verify - load_verify_locations cafile='/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-24 23:35:11,527 - root - INFO - cli.py:65 - run_cli - Loading book from: tests/data/ford.txt
2024-10-24 23:35:11,528 - root - INFO - cli.py:25 - load_and_process_book - Starting to process book content
2024-10-24 23:35:11,528 - root - INFO - text_processing.py:75 - load_and_preprocess_text - Preprocessing text content
2024-10-24 23:35:11,825 - root - INFO - text_processing.py:81 - load_and_preprocess_text - Extracted 0 dates, 0 named entities, and 1 key phrases from the text
2024-10-24 23:35:11,825 - root - INFO - text_processing.py:93 - split_into_chunks - Splitting text into chunks (size: 300, overlap: 150)
2024-10-24 23:35:11,825 - root - INFO - text_processing.py:103 - split_into_chunks - Created 1 chunks
2024-10-24 23:35:11,825 - root - INFO - cli.py:28 - load_and_process_book - Text preprocessed. Number of chunks: 1
2024-10-24 23:35:11,825 - pinecone_plugin_interface.logging - INFO - discover_namespace_packages.py:12 - discover_subpackages - Discovering subpackages in _NamespacePath(['/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/pinecone_plugins'])
2024-10-24 23:35:11,826 - pinecone_plugin_interface.logging - INFO - discover_plugins.py:9 - discover_plugins - Looking for plugins in pinecone_plugins.inference
2024-10-24 23:35:11,826 - pinecone_plugin_interface.logging - INFO - installation.py:10 - install_plugins - Installing plugin inference into Pinecone
2024-10-24 23:35:12,203 - pinecone.core.openapi.shared.rest - DEBUG - rest.py:264 - request - response body: b'{"indexes":[{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}]}'
2024-10-24 23:35:12,203 - root - INFO - pinecone_manager.py:72 - _initialize - Creating new Pinecone index: book-embeddings
2024-10-24 23:35:12,596 - pinecone.core.openapi.shared.rest - DEBUG - rest.py:264 - request - response body: b'{"error":{"code":"ALREADY_EXISTS","message":"Resource  already exists"},"status":409}'
2024-10-24 23:35:12,596 - root - INFO - pinecone_manager.py:86 - _initialize - Index book-embeddings already exists. Using existing index.
2024-10-24 23:35:12,598 - openai._base_client - DEBUG - _base_client.py:446 - _build_request - Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x10b219580>, 'json_data': {'input': ['tests/data/ford.txt'], 'model': 'text-embedding-3-small', 'encoding_format': 'base64'}}
2024-10-24 23:35:12,626 - openai._base_client - DEBUG - _base_client.py:980 - _request - Sending HTTP Request: POST https://api.openai.com/v1/embeddings
2024-10-24 23:35:12,627 - httpcore.connection - DEBUG - _trace.py:45 - trace - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-24 23:35:12,759 - httpcore.connection - DEBUG - _trace.py:45 - trace - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x10b2c8a70>
2024-10-24 23:35:12,759 - httpcore.connection - DEBUG - _trace.py:45 - trace - start_tls.started ssl_context=<ssl.SSLContext object at 0x10b1237d0> server_hostname='api.openai.com' timeout=5.0
2024-10-24 23:35:12,797 - httpcore.connection - DEBUG - _trace.py:45 - trace - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x10b2c9d00>
2024-10-24 23:35:12,797 - httpcore.http11 - DEBUG - _trace.py:45 - trace - send_request_headers.started request=<Request [b'POST']>
2024-10-24 23:35:12,798 - httpcore.http11 - DEBUG - _trace.py:45 - trace - send_request_headers.complete
2024-10-24 23:35:12,798 - httpcore.http11 - DEBUG - _trace.py:45 - trace - send_request_body.started request=<Request [b'POST']>
2024-10-24 23:35:12,798 - httpcore.http11 - DEBUG - _trace.py:45 - trace - send_request_body.complete
2024-10-24 23:35:12,798 - httpcore.http11 - DEBUG - _trace.py:45 - trace - receive_response_headers.started request=<Request [b'POST']>
2024-10-24 23:35:13,257 - httpcore.http11 - DEBUG - _trace.py:45 - trace - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 24 Oct 2024 22:35:13 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-allow-origin', b'*'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-model', b'text-embedding-3-small'), (b'openai-organization', b'uinside'), (b'openai-processing-ms', b'60'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'5000000'), (b'x-ratelimit-remaining-requests', b'9999'), (b'x-ratelimit-remaining-tokens', b'4999996'), (b'x-ratelimit-reset-requests', b'6ms'), (b'x-ratelimit-reset-tokens', b'0s'), (b'x-request-id', b'req_0df48eb255c2864c8890f6ceebaea2d4'), (b'CF-Cache-Status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=kfoN7.mIsyEiHfD9qMtMs5UlxzrFQwg6ykmHSZHkUwM-1729809313-1.0.1.1-uO52BWBmkdVKYIN7rSrDyhG9eInAgmzvNXa7vbi8B_KjZRqYk0wxvitjrK4A7lJWMTlO7f_mCUDWidE7d64aKg; path=/; expires=Thu, 24-Oct-24 23:05:13 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=Uxe5tyi8XzZSkhnEYxf0F_eNKsfyzKhO2OTkTWdrnB4-1729809313334-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d7d704da97d03e6-LIS'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-24 23:35:13,258 - httpx - INFO - _client.py:1038 - _send_single_request - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2024-10-24 23:35:13,258 - httpcore.http11 - DEBUG - _trace.py:45 - trace - receive_response_body.started request=<Request [b'POST']>
2024-10-24 23:35:13,281 - httpcore.http11 - DEBUG - _trace.py:45 - trace - receive_response_body.complete
2024-10-24 23:35:13,281 - httpcore.http11 - DEBUG - _trace.py:45 - trace - response_closed.started
2024-10-24 23:35:13,281 - httpcore.http11 - DEBUG - _trace.py:45 - trace - response_closed.complete
2024-10-24 23:35:13,281 - openai._base_client - DEBUG - _base_client.py:1019 - _request - HTTP Response: POST https://api.openai.com/v1/embeddings "200 OK" Headers([('date', 'Thu, 24 Oct 2024 22:35:13 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-allow-origin', '*'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-model', 'text-embedding-3-small'), ('openai-organization', 'uinside'), ('openai-processing-ms', '60'), ('openai-version', '2020-10-01'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('x-ratelimit-limit-requests', '10000'), ('x-ratelimit-limit-tokens', '5000000'), ('x-ratelimit-remaining-requests', '9999'), ('x-ratelimit-remaining-tokens', '4999996'), ('x-ratelimit-reset-requests', '6ms'), ('x-ratelimit-reset-tokens', '0s'), ('x-request-id', 'req_0df48eb255c2864c8890f6ceebaea2d4'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=kfoN7.mIsyEiHfD9qMtMs5UlxzrFQwg6ykmHSZHkUwM-1729809313-1.0.1.1-uO52BWBmkdVKYIN7rSrDyhG9eInAgmzvNXa7vbi8B_KjZRqYk0wxvitjrK4A7lJWMTlO7f_mCUDWidE7d64aKg; path=/; expires=Thu, 24-Oct-24 23:05:13 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('x-content-type-options', 'nosniff'), ('set-cookie', '_cfuvid=Uxe5tyi8XzZSkhnEYxf0F_eNKsfyzKhO2OTkTWdrnB4-1729809313334-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('server', 'cloudflare'), ('cf-ray', '8d7d704da97d03e6-LIS'), ('content-encoding', 'gzip'), ('alt-svc', 'h3=":443"; ma=86400')])
2024-10-24 23:35:13,281 - openai._base_client - DEBUG - _base_client.py:1027 - _request - request_id: req_0df48eb255c2864c8890f6ceebaea2d4
2024-10-24 23:35:14,188 - pinecone.core.openapi.shared.rest - DEBUG - rest.py:264 - request - response body: b'{"upsertedCount":1}'
2024-10-24 23:35:14,346 - root - INFO - embedding.py:46 - save_chunks_and_embeddings - Saving 1 chunks, their embeddings, and processed text to data/embeddings/65d642d83b720a1e924d3ebef3a845fe_chunks_embeddings.pkl.
2024-10-24 23:35:14,346 - root - INFO - embedding.py:49 - save_chunks_and_embeddings - Data saved to data/embeddings/65d642d83b720a1e924d3ebef3a845fe_chunks_embeddings.pkl.
2024-10-24 23:35:14,347 - root - INFO - cli.py:38 - load_and_process_book - Book data created. Number of chunks: 1
2024-10-24 23:35:14,347 - root - INFO - cli.py:67 - run_cli - Book loaded and preprocessed. Text split into 1 chunks
2024-10-24 23:35:29,904 - root - INFO - cli.py:77 - run_cli - Received query:   ?
2024-10-24 23:35:29,904 - root - INFO - cli.py:43 - answer_question - Received query:   ?
2024-10-24 23:35:29,905 - root - INFO - rag.py:68 - rag_query - Processing RAG query:   ?
2024-10-24 23:35:29,905 - pinecone_plugin_interface.logging - INFO - discover_namespace_packages.py:12 - discover_subpackages - Discovering subpackages in _NamespacePath(['/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/pinecone_plugins'])
2024-10-24 23:35:29,907 - pinecone_plugin_interface.logging - INFO - discover_plugins.py:9 - discover_plugins - Looking for plugins in pinecone_plugins.inference
2024-10-24 23:35:29,908 - pinecone_plugin_interface.logging - INFO - installation.py:10 - install_plugins - Installing plugin inference into Pinecone
2024-10-24 23:35:30,327 - pinecone.core.openapi.shared.rest - DEBUG - rest.py:264 - request - response body: b'{"indexes":[{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}]}'
2024-10-24 23:35:30,328 - root - INFO - pinecone_manager.py:72 - _initialize - Creating new Pinecone index: book-embeddings
2024-10-24 23:35:30,603 - pinecone.core.openapi.shared.rest - DEBUG - rest.py:264 - request - response body: b'{"error":{"code":"ALREADY_EXISTS","message":"Resource  already exists"},"status":409}'
2024-10-24 23:35:30,603 - root - INFO - pinecone_manager.py:86 - _initialize - Index book-embeddings already exists. Using existing index.
2024-10-24 23:35:30,611 - pinecone_plugin_interface.logging - INFO - discover_namespace_packages.py:12 - discover_subpackages - Discovering subpackages in _NamespacePath(['/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/pinecone_plugins'])
2024-10-24 23:35:30,611 - pinecone_plugin_interface.logging - INFO - discover_plugins.py:9 - discover_plugins - Looking for plugins in pinecone_plugins.inference
2024-10-24 23:35:30,611 - pinecone_plugin_interface.logging - INFO - installation.py:10 - install_plugins - Installing plugin inference into Pinecone
2024-10-24 23:35:31,192 - pinecone.core.openapi.shared.rest - DEBUG - rest.py:264 - request - response body: b'{"indexes":[{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}]}'
2024-10-24 23:35:31,193 - root - INFO - pinecone_manager.py:72 - _initialize - Creating new Pinecone index: book-embeddings
2024-10-24 23:35:31,462 - pinecone.core.openapi.shared.rest - DEBUG - rest.py:264 - request - response body: b'{"error":{"code":"ALREADY_EXISTS","message":"Resource  already exists"},"status":409}'
2024-10-24 23:35:31,463 - root - INFO - pinecone_manager.py:86 - _initialize - Index book-embeddings already exists. Using existing index.
2024-10-24 23:35:31,465 - openai._base_client - DEBUG - _base_client.py:446 - _build_request - Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x11355d9e0>, 'json_data': {'input': ['  ?'], 'model': 'text-embedding-3-small', 'encoding_format': 'base64'}}
2024-10-24 23:35:31,465 - openai._base_client - DEBUG - _base_client.py:980 - _request - Sending HTTP Request: POST https://api.openai.com/v1/embeddings
2024-10-24 23:35:31,466 - httpcore.connection - DEBUG - _trace.py:45 - trace - close.started
2024-10-24 23:35:31,466 - httpcore.connection - DEBUG - _trace.py:45 - trace - close.complete
2024-10-24 23:35:31,466 - httpcore.connection - DEBUG - _trace.py:45 - trace - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-24 23:35:31,502 - httpcore.connection - DEBUG - _trace.py:45 - trace - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x10b2fb7a0>
2024-10-24 23:35:31,502 - httpcore.connection - DEBUG - _trace.py:45 - trace - start_tls.started ssl_context=<ssl.SSLContext object at 0x10b1237d0> server_hostname='api.openai.com' timeout=5.0
2024-10-24 23:35:31,542 - httpcore.connection - DEBUG - _trace.py:45 - trace - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x10b2fa810>
2024-10-24 23:35:31,543 - httpcore.http11 - DEBUG - _trace.py:45 - trace - send_request_headers.started request=<Request [b'POST']>
2024-10-24 23:35:31,543 - httpcore.http11 - DEBUG - _trace.py:45 - trace - send_request_headers.complete
2024-10-24 23:35:31,543 - httpcore.http11 - DEBUG - _trace.py:45 - trace - send_request_body.started request=<Request [b'POST']>
2024-10-24 23:35:31,543 - httpcore.http11 - DEBUG - _trace.py:45 - trace - send_request_body.complete
2024-10-24 23:35:31,543 - httpcore.http11 - DEBUG - _trace.py:45 - trace - receive_response_headers.started request=<Request [b'POST']>
2024-10-24 23:35:31,988 - httpcore.http11 - DEBUG - _trace.py:45 - trace - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 24 Oct 2024 22:35:32 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-allow-origin', b'*'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-model', b'text-embedding-3-small'), (b'openai-organization', b'uinside'), (b'openai-processing-ms', b'72'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'5000000'), (b'x-ratelimit-remaining-requests', b'9999'), (b'x-ratelimit-remaining-tokens', b'4999992'), (b'x-ratelimit-reset-requests', b'6ms'), (b'x-ratelimit-reset-tokens', b'0s'), (b'x-request-id', b'req_b5e0b85fb06abc18143b17a9ebd759f3'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d7d70c2dc08e3c4-LIS'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-24 23:35:31,990 - httpx - INFO - _client.py:1038 - _send_single_request - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2024-10-24 23:35:31,990 - httpcore.http11 - DEBUG - _trace.py:45 - trace - receive_response_body.started request=<Request [b'POST']>
2024-10-24 23:35:31,998 - httpcore.http11 - DEBUG - _trace.py:45 - trace - receive_response_body.complete
2024-10-24 23:35:31,998 - httpcore.http11 - DEBUG - _trace.py:45 - trace - response_closed.started
2024-10-24 23:35:31,998 - httpcore.http11 - DEBUG - _trace.py:45 - trace - response_closed.complete
2024-10-24 23:35:31,998 - openai._base_client - DEBUG - _base_client.py:1019 - _request - HTTP Response: POST https://api.openai.com/v1/embeddings "200 OK" Headers({'date': 'Thu, 24 Oct 2024 22:35:32 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-3-small', 'openai-organization': 'uinside', 'openai-processing-ms': '72', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '9999', 'x-ratelimit-remaining-tokens': '4999992', 'x-ratelimit-reset-requests': '6ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_b5e0b85fb06abc18143b17a9ebd759f3', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d7d70c2dc08e3c4-LIS', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-24 23:35:31,999 - openai._base_client - DEBUG - _base_client.py:1027 - _request - request_id: req_b5e0b85fb06abc18143b17a9ebd759f3
2024-10-24 23:35:32,792 - pinecone.core.openapi.shared.rest - DEBUG - rest.py:264 - request - response body: b'{"upsertedCount":1}'
2024-10-24 23:35:33,726 - pinecone.core.openapi.shared.rest - DEBUG - rest.py:264 - request - response body: b'{"results":[],"matches":[{"id":"0","score":1,"values":[],"metadata":{"chunk":"\xd0\x9a\xd0\xb0\xd0\xba\xd0\xbe\xd0\xb3\xd0\xbe \xd1\x86\xd0\xb2\xd0\xb5\xd1\x82\xd0\xb0 \xd0\xb0\xd0\xb2\xd1\x82\xd0\xbe?"}},{"id":"c4532a84961f92ab47be24889d3090b0","score":0.25741294,"values":[],"metadata":{"text":"What was the significance of the \'crush space\' in the Pinto\'s design, and how did it compare to other vehicles?"}},{"id":"381ff60ffe74542b971aeaa2148a488c","score":0.24771373,"values":[],"metadata":{"text":"What was the model year of the Ford Pinto involved in the accident?"}},{"id":"d5ecdbd9489bb32b1d887074f67e7fa5","score":0.221266523,"values":[],"metadata":{"text":"How did the court define \'malice\' in the context of the Ford Pinto case?"}},{"id":"7c25ca08798757a5d15caefbcf6d0c6a","score":0.2174308,"values":[],"metadata":{"text":"How did Ford\'s \'rush\' development of the Pinto affect its safety design?"}},{"id":"51bf0066086639adb0a494086a5121ce","score":0.209419027,"values":[],"metadata":{"text":"Who was the executive vice president of Ford who conceived the Pinto project?"}},{"id":"032d6d9f7cf883f483068a2d1d3ea7d0","score":0.202357724,"values":[],"metadata":{"text":"What was the speed of the Ford Galaxie at the moment of impact with the Pinto?"}},{"id":"cb1f75b9db1ebda19c630ecdc7e299f0","score":0.195930511,"values":[],"metadata":{"text":"How did Ford\'s internal memo about the cost-benefit analysis of safety improvements come to light during the trial?"}},{"id":"01e59f8ef084bd6a4d99f9067667d768","score":0.192188159,"values":[],"metadata":{"text":"What was the weight target for the Pinto set by Ford?"}},{"id":"6baf920636bb0e7a14c37c499f0a135f","score":0.190332636,"values":[],"metadata":{"text":"What factors influenced the placement of the fuel tank in the Ford Pinto?"}}],"namespace":"","usage":{"readUnits":6}}'
2024-10-24 23:35:33,729 - root - INFO - openai_service.py:40 - generate_answer - Generating answer for query:   ?
2024-10-24 23:35:33,737 - openai._base_client - DEBUG - _base_client.py:446 - _build_request - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful assistant specialized in extracting precise information from texts. Focus on providing accurate information. If the exact information is not available, explain what is known and what is missing.'}, {'role': 'user', 'content': 'Context: Original text chunks and metadata:\n\nChunk 1 (score: 1.00):   ?\n\nChunk 2 (score: 0.26): \n\nChunk 3 (score: 0.25): \n\nChunk 4 (score: 0.22): \n\nChunk 5 (score: 0.22): \n\nChunk 6 (score: 0.21): \n\nChunk 7 (score: 0.20): \n\nChunk 8 (score: 0.20): \n\nChunk 9 (score: 0.19): \n\nChunk 10 (score: 0.19): \n\nQuestion:   ?\n\nQuestion:   ?\n\nProvide a concise answer based on the context. If specific information is not available, briefly explain what is known and what is missing.'}], 'model': 'gpt-4o-mini', 'max_tokens': 15000}}
2024-10-24 23:35:33,737 - openai._base_client - DEBUG - _base_client.py:980 - _request - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-24 23:35:33,738 - httpcore.connection - DEBUG - _trace.py:45 - trace - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-24 23:35:33,773 - httpcore.connection - DEBUG - _trace.py:45 - trace - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x10b2d9c10>
2024-10-24 23:35:33,773 - httpcore.connection - DEBUG - _trace.py:45 - trace - start_tls.started ssl_context=<ssl.SSLContext object at 0x10b1cef50> server_hostname='api.openai.com' timeout=5.0
2024-10-24 23:35:33,810 - httpcore.connection - DEBUG - _trace.py:45 - trace - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x10b2d8e00>
2024-10-24 23:35:33,810 - httpcore.http11 - DEBUG - _trace.py:45 - trace - send_request_headers.started request=<Request [b'POST']>
2024-10-24 23:35:33,810 - httpcore.http11 - DEBUG - _trace.py:45 - trace - send_request_headers.complete
2024-10-24 23:35:33,810 - httpcore.http11 - DEBUG - _trace.py:45 - trace - send_request_body.started request=<Request [b'POST']>
2024-10-24 23:35:33,810 - httpcore.http11 - DEBUG - _trace.py:45 - trace - send_request_body.complete
2024-10-24 23:35:33,810 - httpcore.http11 - DEBUG - _trace.py:45 - trace - receive_response_headers.started request=<Request [b'POST']>
2024-10-24 23:35:35,112 - httpcore.http11 - DEBUG - _trace.py:45 - trace - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 24 Oct 2024 22:35:35 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'uinside'), (b'openai-processing-ms', b'1103'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000000'), (b'x-ratelimit-remaining-requests', b'9999'), (b'x-ratelimit-remaining-tokens', b'9991828'), (b'x-ratelimit-reset-requests', b'6ms'), (b'x-ratelimit-reset-tokens', b'49ms'), (b'x-request-id', b'req_f6915bc70065c3f353c1157bb5716266'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=pXdubV2CJhI87CV_cuLDriWjCoN2mOOvf.7PJlEwITM-1729809335-1.0.1.1-1QoXEavmeQkXzAKNzBFwUOBHgSt3hN_rIQHotj9KFGzfwgE9sSStrFiD4DPZ3OkPwXxtRD_IeUdGPAIPmWPadw; path=/; expires=Thu, 24-Oct-24 23:05:35 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=VwKxo.jKuhRAkHxOVoTswXlBCBA1pK7vPVVqlbUn0A8-1729809335188-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d7d70d0f981e3bd-LIS'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-24 23:35:35,112 - httpx - INFO - _client.py:1038 - _send_single_request - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-24 23:35:35,113 - httpcore.http11 - DEBUG - _trace.py:45 - trace - receive_response_body.started request=<Request [b'POST']>
2024-10-24 23:35:35,113 - httpcore.http11 - DEBUG - _trace.py:45 - trace - receive_response_body.complete
2024-10-24 23:35:35,113 - httpcore.http11 - DEBUG - _trace.py:45 - trace - response_closed.started
2024-10-24 23:35:35,113 - httpcore.http11 - DEBUG - _trace.py:45 - trace - response_closed.complete
2024-10-24 23:35:35,113 - openai._base_client - DEBUG - _base_client.py:1019 - _request - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers([('date', 'Thu, 24 Oct 2024 22:35:35 GMT'), ('content-type', 'application/json'), ('transfer-encoding', 'chunked'), ('connection', 'keep-alive'), ('access-control-expose-headers', 'X-Request-ID'), ('openai-organization', 'uinside'), ('openai-processing-ms', '1103'), ('openai-version', '2020-10-01'), ('x-ratelimit-limit-requests', '10000'), ('x-ratelimit-limit-tokens', '10000000'), ('x-ratelimit-remaining-requests', '9999'), ('x-ratelimit-remaining-tokens', '9991828'), ('x-ratelimit-reset-requests', '6ms'), ('x-ratelimit-reset-tokens', '49ms'), ('x-request-id', 'req_f6915bc70065c3f353c1157bb5716266'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=pXdubV2CJhI87CV_cuLDriWjCoN2mOOvf.7PJlEwITM-1729809335-1.0.1.1-1QoXEavmeQkXzAKNzBFwUOBHgSt3hN_rIQHotj9KFGzfwgE9sSStrFiD4DPZ3OkPwXxtRD_IeUdGPAIPmWPadw; path=/; expires=Thu, 24-Oct-24 23:05:35 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('x-content-type-options', 'nosniff'), ('set-cookie', '_cfuvid=VwKxo.jKuhRAkHxOVoTswXlBCBA1pK7vPVVqlbUn0A8-1729809335188-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('server', 'cloudflare'), ('cf-ray', '8d7d70d0f981e3bd-LIS'), ('content-encoding', 'gzip'), ('alt-svc', 'h3=":443"; ma=86400')])
2024-10-24 23:35:35,113 - openai._base_client - DEBUG - _base_client.py:1027 - _request - request_id: req_f6915bc70065c3f353c1157bb5716266
2024-10-24 23:35:35,119 - root - INFO - rag.py:80 - rag_query - Generated answer: The context does not provide specific information about the color of the car. The only available text is a repeated question, "  ?" (which means "What color is the car?"). Therefore, we know the question being asked but lack any details regarding the actual color of the car.
2024-10-24 23:35:35,123 - root - INFO - cli.py:46 - answer_question - Generated answer: The context does not provide specific information about the color of the car. The only available text is a repeated question, "  ?" (which means "What color is the car?"). Therefore, we know the question being asked but lack any details regarding the actual color of the car.
2024-10-24 23:35:58,923 - root - INFO - cli.py:77 - run_cli - Received query:     ?
2024-10-24 23:35:58,924 - root - INFO - cli.py:43 - answer_question - Received query:     ?
2024-10-24 23:35:58,924 - root - INFO - rag.py:68 - rag_query - Processing RAG query:     ?
2024-10-24 23:35:58,924 - pinecone_plugin_interface.logging - INFO - discover_namespace_packages.py:12 - discover_subpackages - Discovering subpackages in _NamespacePath(['/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/pinecone_plugins'])
2024-10-24 23:35:58,925 - pinecone_plugin_interface.logging - INFO - discover_plugins.py:9 - discover_plugins - Looking for plugins in pinecone_plugins.inference
2024-10-24 23:35:58,925 - pinecone_plugin_interface.logging - INFO - installation.py:10 - install_plugins - Installing plugin inference into Pinecone
2024-10-24 23:35:59,342 - pinecone.core.openapi.shared.rest - DEBUG - rest.py:264 - request - response body: b'{"indexes":[{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}]}'
2024-10-24 23:35:59,343 - root - INFO - pinecone_manager.py:72 - _initialize - Creating new Pinecone index: book-embeddings
2024-10-24 23:35:59,971 - pinecone.core.openapi.shared.rest - DEBUG - rest.py:264 - request - response body: b'{"error":{"code":"ALREADY_EXISTS","message":"Resource  already exists"},"status":409}'
2024-10-24 23:35:59,971 - root - INFO - pinecone_manager.py:86 - _initialize - Index book-embeddings already exists. Using existing index.
2024-10-24 23:35:59,972 - pinecone_plugin_interface.logging - INFO - discover_namespace_packages.py:12 - discover_subpackages - Discovering subpackages in _NamespacePath(['/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/pinecone_plugins'])
2024-10-24 23:35:59,972 - pinecone_plugin_interface.logging - INFO - discover_plugins.py:9 - discover_plugins - Looking for plugins in pinecone_plugins.inference
2024-10-24 23:35:59,972 - pinecone_plugin_interface.logging - INFO - installation.py:10 - install_plugins - Installing plugin inference into Pinecone
2024-10-24 23:36:00,373 - pinecone.core.openapi.shared.rest - DEBUG - rest.py:264 - request - response body: b'{"indexes":[{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}]}'
2024-10-24 23:36:00,374 - root - INFO - pinecone_manager.py:72 - _initialize - Creating new Pinecone index: book-embeddings
2024-10-24 23:36:00,687 - pinecone.core.openapi.shared.rest - DEBUG - rest.py:264 - request - response body: b'{"error":{"code":"ALREADY_EXISTS","message":"Resource  already exists"},"status":409}'
2024-10-24 23:36:00,688 - root - INFO - pinecone_manager.py:86 - _initialize - Index book-embeddings already exists. Using existing index.
2024-10-24 23:36:00,689 - openai._base_client - DEBUG - _base_client.py:446 - _build_request - Request options: {'method': 'post', 'url': '/embeddings', 'files': None, 'post_parser': <function Embeddings.create.<locals>.parser at 0x11355da80>, 'json_data': {'input': ['    ?'], 'model': 'text-embedding-3-small', 'encoding_format': 'base64'}}
2024-10-24 23:36:00,690 - openai._base_client - DEBUG - _base_client.py:980 - _request - Sending HTTP Request: POST https://api.openai.com/v1/embeddings
2024-10-24 23:36:00,691 - httpcore.connection - DEBUG - _trace.py:45 - trace - close.started
2024-10-24 23:36:00,691 - httpcore.connection - DEBUG - _trace.py:45 - trace - close.complete
2024-10-24 23:36:00,691 - httpcore.connection - DEBUG - _trace.py:45 - trace - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-24 23:36:00,816 - httpcore.connection - DEBUG - _trace.py:45 - trace - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x10b2e7a70>
2024-10-24 23:36:00,817 - httpcore.connection - DEBUG - _trace.py:45 - trace - start_tls.started ssl_context=<ssl.SSLContext object at 0x10b1237d0> server_hostname='api.openai.com' timeout=5.0
2024-10-24 23:36:00,863 - httpcore.connection - DEBUG - _trace.py:45 - trace - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x10b2e7740>
2024-10-24 23:36:00,864 - httpcore.http11 - DEBUG - _trace.py:45 - trace - send_request_headers.started request=<Request [b'POST']>
2024-10-24 23:36:00,864 - httpcore.http11 - DEBUG - _trace.py:45 - trace - send_request_headers.complete
2024-10-24 23:36:00,864 - httpcore.http11 - DEBUG - _trace.py:45 - trace - send_request_body.started request=<Request [b'POST']>
2024-10-24 23:36:00,867 - httpcore.http11 - DEBUG - _trace.py:45 - trace - send_request_body.complete
2024-10-24 23:36:00,872 - httpcore.http11 - DEBUG - _trace.py:45 - trace - receive_response_headers.started request=<Request [b'POST']>
2024-10-24 23:36:01,095 - httpcore.http11 - DEBUG - _trace.py:45 - trace - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 24 Oct 2024 22:36:01 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-allow-origin', b'*'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-model', b'text-embedding-3-small'), (b'openai-organization', b'uinside'), (b'openai-processing-ms', b'67'), (b'openai-version', b'2020-10-01'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'5000000'), (b'x-ratelimit-remaining-requests', b'9999'), (b'x-ratelimit-remaining-tokens', b'4999987'), (b'x-ratelimit-reset-requests', b'6ms'), (b'x-ratelimit-reset-tokens', b'0s'), (b'x-request-id', b'req_6490e4374ddfffe072cd4a1dc6a6af31'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d7d717a1f127113-LIS'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-24 23:36:01,095 - httpx - INFO - _client.py:1038 - _send_single_request - HTTP Request: POST https://api.openai.com/v1/embeddings "HTTP/1.1 200 OK"
2024-10-24 23:36:01,096 - httpcore.http11 - DEBUG - _trace.py:45 - trace - receive_response_body.started request=<Request [b'POST']>
2024-10-24 23:36:01,096 - httpcore.http11 - DEBUG - _trace.py:45 - trace - receive_response_body.complete
2024-10-24 23:36:01,096 - httpcore.http11 - DEBUG - _trace.py:45 - trace - response_closed.started
2024-10-24 23:36:01,096 - httpcore.http11 - DEBUG - _trace.py:45 - trace - response_closed.complete
2024-10-24 23:36:01,097 - openai._base_client - DEBUG - _base_client.py:1019 - _request - HTTP Response: POST https://api.openai.com/v1/embeddings "200 OK" Headers({'date': 'Thu, 24 Oct 2024 22:36:01 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-allow-origin': '*', 'access-control-expose-headers': 'X-Request-ID', 'openai-model': 'text-embedding-3-small', 'openai-organization': 'uinside', 'openai-processing-ms': '67', 'openai-version': '2020-10-01', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '5000000', 'x-ratelimit-remaining-requests': '9999', 'x-ratelimit-remaining-tokens': '4999987', 'x-ratelimit-reset-requests': '6ms', 'x-ratelimit-reset-tokens': '0s', 'x-request-id': 'req_6490e4374ddfffe072cd4a1dc6a6af31', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d7d717a1f127113-LIS', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-24 23:36:01,097 - openai._base_client - DEBUG - _base_client.py:1027 - _request - request_id: req_6490e4374ddfffe072cd4a1dc6a6af31
2024-10-24 23:36:01,920 - pinecone.core.openapi.shared.rest - DEBUG - rest.py:264 - request - response body: b'{"upsertedCount":1}'
2024-10-24 23:36:02,685 - pinecone.core.openapi.shared.rest - DEBUG - rest.py:264 - request - response body: b'{"results":[],"matches":[{"id":"0","score":1,"values":[],"metadata":{"chunk":"\xd0\x9a\xd0\xb0\xd0\xba\xd0\xbe\xd0\xb9 \xd0\xbc\xd0\xbe\xd0\xb4\xd0\xb5\xd0\xbb\xd1\x8c\xd0\xbd\xd1\x8b\xd0\xb9 \xd0\xb3\xd0\xbe\xd0\xb4 \xd0\xb8 \xd0\xbc\xd0\xb0\xd1\x80\xd0\xba\xd0\xb0?"}},{"id":"381ff60ffe74542b971aeaa2148a488c","score":0.413662314,"values":[],"metadata":{"text":"What was the model year of the Ford Pinto involved in the accident?"}},{"id":"c4532a84961f92ab47be24889d3090b0","score":0.260540605,"values":[],"metadata":{"text":"What was the significance of the \'crush space\' in the Pinto\'s design, and how did it compare to other vehicles?"}},{"id":"27","score":0.246054545,"values":[],"metadata":{"chunk":". . 125 17.2 \xd0\x9c\xd0\xbe\xd0\xb4\xd1\x83\xd0\xbb\xd1\x8clogging . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 126 17.3 \xd0\xa1\xd0\xb5\xd1\x80\xd0\xb8\xd1\x8f\xc2\xab\xd0\x9c\xd0\xbe\xd0\xb4\xd1\x83\xd0\xbb\xd1\x8c\xd0\xbd\xd0\xb5\xd0\xb4\xd0\xb5\xd0\xbb\xd0\xb8\xc2\xbb . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 128 17.4 \xd0\xa0\xd0\xb5\xd0\xb7\xd1\x8e\xd0\xbc\xd0\xb5 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 128 18 \xd0\x94\xd0\xbe\xd0\xbf\xd0\xbe\xd0\xbb\xd0\xbd\xd0\xb8\xd1\x82\xd0\xb5\xd0\xbb\xd1\x8c\xd0\xbd\xd0\xbe 129 18.1 \xd0\x9f\xd0\xb5\xd1\x80\xd0\xb5\xd0\xb4\xd0\xb0\xd1\x87\xd0\xb0\xd0\xba\xd0\xbe\xd1\x80\xd1\x82\xd0\xb5\xd0\xb6\xd0\xb5\xd0\xb9 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 129 18.2 \xd0\xa1\xd0\xbf\xd0\xb5\xd1\x86\xd0\xb8\xd0\xb0\xd0\xbb\xd1\x8c\xd0\xbd\xd1\x8b\xd0\xb5\xd0\xbc\xd0\xb5\xd1\x82\xd0\xbe\xd0\xb4\xd1\x8b . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 130 18.3 \xd0\x91\xd0\xbb\xd0\xbe\xd0\xba\xd0\xb8\xd0\xb2\xd0\xbe\xd0\xb4\xd0\xbd\xd0\xbe\xd0\xb2\xd1\x8b\xd1\x80\xd0\xb0\xd0\xb6\xd0\xb5\xd0\xbd\xd0\xb8\xd0\xb5 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 130 18.4 Lambda-\xd1\x84\xd0\xbe\xd1\x80\xd0\xbc\xd1\x8b . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 131 18.5 \xd0\x93\xd0\xb5\xd0\xbd\xd0\xb5\xd1\x80\xd0\xb0\xd1\x82\xd0\xbe\xd1\x80\xd1\x8b\xd1\x81\xd0\xbf\xd0\xb8\xd1\x81\xd0\xba\xd0\xbe\xd0\xb2 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . ."}},{"id":"7c25ca08798757a5d15caefbcf6d0c6a","score":0.245544374,"values":[],"metadata":{"text":"How did Ford\'s \'rush\' development of the Pinto affect its safety design?"}},{"id":"4af6bd37a7ac7aa66d6fa4606aaa82b0","score":0.223532379,"values":[],"metadata":{"text":"What was the estimated cost to fix the Pinto\'s fuel tank design, and how did Ford justify not implementing it?"}},{"id":"34d53f2e1e7ce76e0573ae33e295b16d","score":0.222371861,"values":[],"metadata":{"text":"What evidence suggested that Ford was aware of the Pinto\'s safety issues before its release?"}},{"id":"51bf0066086639adb0a494086a5121ce","score":0.217901215,"values":[],"metadata":{"text":"Who was the executive vice president of Ford who conceived the Pinto project?"}},{"id":"032d6d9f7cf883f483068a2d1d3ea7d0","score":0.213339031,"values":[],"metadata":{"text":"What was the speed of the Ford Galaxie at the moment of impact with the Pinto?"}},{"id":"01e59f8ef084bd6a4d99f9067667d768","score":0.211256489,"values":[],"metadata":{"text":"What was the weight target for the Pinto set by Ford?"}}],"namespace":"","usage":{"readUnits":6}}'
2024-10-24 23:36:02,687 - root - INFO - openai_service.py:40 - generate_answer - Generating answer for query:     ?
2024-10-24 23:36:02,700 - openai._base_client - DEBUG - _base_client.py:446 - _build_request - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'system', 'content': 'You are a helpful assistant specialized in extracting precise information from texts. Focus on providing accurate information. If the exact information is not available, explain what is known and what is missing.'}, {'role': 'user', 'content': 'Context: Original text chunks and metadata:\n\nChunk 1 (score: 1.00):     ?\n\nChunk 2 (score: 0.41): \n\nChunk 3 (score: 0.26): \n\nChunk 4 (score: 0.25): . . 125 17.2 logging . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 126 17.3  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 128 17.4  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 128 18  129 18.1  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 129 18.2  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 130 18.3  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 130 18.4 Lambda- . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 131 18.5  . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .\n\nChunk 5 (score: 0.25): \n\nChunk 6 (score: 0.22): \n\nChunk 7 (score: 0.22): \n\nChunk 8 (score: 0.22): \n\nChunk 9 (score: 0.21): \n\nChunk 10 (score: 0.21): \n\nQuestion:     ?\n\nQuestion:     ?\n\nProvide a concise answer based on the context. If specific information is not available, briefly explain what is known and what is missing.'}], 'model': 'gpt-4o-mini', 'max_tokens': 15000}}
2024-10-24 23:36:02,701 - openai._base_client - DEBUG - _base_client.py:980 - _request - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2024-10-24 23:36:02,701 - httpcore.connection - DEBUG - _trace.py:45 - trace - close.started
2024-10-24 23:36:02,702 - httpcore.connection - DEBUG - _trace.py:45 - trace - close.complete
2024-10-24 23:36:02,702 - httpcore.connection - DEBUG - _trace.py:45 - trace - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2024-10-24 23:36:02,740 - httpcore.connection - DEBUG - _trace.py:45 - trace - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x10b2f34d0>
2024-10-24 23:36:02,741 - httpcore.connection - DEBUG - _trace.py:45 - trace - start_tls.started ssl_context=<ssl.SSLContext object at 0x10b1cef50> server_hostname='api.openai.com' timeout=5.0
2024-10-24 23:36:02,783 - httpcore.connection - DEBUG - _trace.py:45 - trace - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x10b2fa2d0>
2024-10-24 23:36:02,783 - httpcore.http11 - DEBUG - _trace.py:45 - trace - send_request_headers.started request=<Request [b'POST']>
2024-10-24 23:36:02,784 - httpcore.http11 - DEBUG - _trace.py:45 - trace - send_request_headers.complete
2024-10-24 23:36:02,784 - httpcore.http11 - DEBUG - _trace.py:45 - trace - send_request_body.started request=<Request [b'POST']>
2024-10-24 23:36:02,784 - httpcore.http11 - DEBUG - _trace.py:45 - trace - send_request_body.complete
2024-10-24 23:36:02,784 - httpcore.http11 - DEBUG - _trace.py:45 - trace - receive_response_headers.started request=<Request [b'POST']>
2024-10-24 23:36:03,656 - httpcore.http11 - DEBUG - _trace.py:45 - trace - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 24 Oct 2024 22:36:03 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'access-control-expose-headers', b'X-Request-ID'), (b'openai-organization', b'uinside'), (b'openai-processing-ms', b'687'), (b'openai-version', b'2020-10-01'), (b'x-ratelimit-limit-requests', b'10000'), (b'x-ratelimit-limit-tokens', b'10000000'), (b'x-ratelimit-remaining-requests', b'9999'), (b'x-ratelimit-remaining-tokens', b'9991828'), (b'x-ratelimit-reset-requests', b'6ms'), (b'x-ratelimit-reset-tokens', b'49ms'), (b'x-request-id', b'req_e2fc74bf3598bcd3188ed07ff28345d1'), (b'strict-transport-security', b'max-age=31536000; includeSubDomains; preload'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8d7d71860d7c48a4-LIS'), (b'Content-Encoding', b'gzip'), (b'alt-svc', b'h3=":443"; ma=86400')])
2024-10-24 23:36:03,657 - httpx - INFO - _client.py:1038 - _send_single_request - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-10-24 23:36:03,657 - httpcore.http11 - DEBUG - _trace.py:45 - trace - receive_response_body.started request=<Request [b'POST']>
2024-10-24 23:36:03,657 - httpcore.http11 - DEBUG - _trace.py:45 - trace - receive_response_body.complete
2024-10-24 23:36:03,657 - httpcore.http11 - DEBUG - _trace.py:45 - trace - response_closed.started
2024-10-24 23:36:03,657 - httpcore.http11 - DEBUG - _trace.py:45 - trace - response_closed.complete
2024-10-24 23:36:03,657 - openai._base_client - DEBUG - _base_client.py:1019 - _request - HTTP Response: POST https://api.openai.com/v1/chat/completions "200 OK" Headers({'date': 'Thu, 24 Oct 2024 22:36:03 GMT', 'content-type': 'application/json', 'transfer-encoding': 'chunked', 'connection': 'keep-alive', 'access-control-expose-headers': 'X-Request-ID', 'openai-organization': 'uinside', 'openai-processing-ms': '687', 'openai-version': '2020-10-01', 'x-ratelimit-limit-requests': '10000', 'x-ratelimit-limit-tokens': '10000000', 'x-ratelimit-remaining-requests': '9999', 'x-ratelimit-remaining-tokens': '9991828', 'x-ratelimit-reset-requests': '6ms', 'x-ratelimit-reset-tokens': '49ms', 'x-request-id': 'req_e2fc74bf3598bcd3188ed07ff28345d1', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'cf-cache-status': 'DYNAMIC', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '8d7d71860d7c48a4-LIS', 'content-encoding': 'gzip', 'alt-svc': 'h3=":443"; ma=86400'})
2024-10-24 23:36:03,657 - openai._base_client - DEBUG - _base_client.py:1027 - _request - request_id: req_e2fc74bf3598bcd3188ed07ff28345d1
2024-10-24 23:36:03,658 - root - INFO - rag.py:80 - rag_query - Generated answer: The context provided does not contain any information regarding the model year or brand of a vehicle. It only includes a question asking for that information and some unrelated text chunks that do not address the inquiry. Therefore, the specific information about the model year and brand is missing.
2024-10-24 23:36:03,661 - root - INFO - cli.py:46 - answer_question - Generated answer: The context provided does not contain any information regarding the model year or brand of a vehicle. It only includes a question asking for that information and some unrelated text chunks that do not address the inquiry. Therefore, the specific information about the model year and brand is missing.
2024-10-24 23:36:50,922 - httpx - DEBUG - _config.py:82 - load_ssl_context - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-24 23:36:50,923 - httpx - DEBUG - _config.py:148 - load_ssl_context_verify - load_verify_locations cafile='/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-24 23:36:50,930 - pinecone_plugin_interface.logging - INFO - discover_namespace_packages.py:12 - discover_subpackages - Discovering subpackages in _NamespacePath(['/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/pinecone_plugins'])
2024-10-24 23:36:50,930 - pinecone_plugin_interface.logging - INFO - discover_plugins.py:9 - discover_plugins - Looking for plugins in pinecone_plugins.inference
2024-10-24 23:36:50,938 - pinecone_plugin_interface.logging - INFO - installation.py:10 - install_plugins - Installing plugin inference into Pinecone
2024-10-24 23:36:51,266 - pinecone.core.openapi.shared.rest - DEBUG - rest.py:264 - request - response body: b'{"indexes":[{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}]}'
2024-10-24 23:36:51,269 - root - INFO - pinecone_manager.py:72 - _initialize - Creating new Pinecone index: book-embeddings
2024-10-24 23:36:51,599 - pinecone.core.openapi.shared.rest - DEBUG - rest.py:264 - request - response body: b'{"error":{"code":"ALREADY_EXISTS","message":"Resource  already exists"},"status":409}'
2024-10-24 23:36:51,600 - root - INFO - pinecone_manager.py:86 - _initialize - Index book-embeddings already exists. Using existing index.
2024-10-24 23:36:51,832 - pinecone.core.openapi.shared.rest - DEBUG - rest.py:264 - request - response body: b'{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}'
2024-10-24 23:36:51,840 - root - INFO - cli.py:54 - run_cli - Starting the RAG system
2024-10-24 23:36:51,841 - httpx - DEBUG - _config.py:82 - load_ssl_context - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-24 23:36:51,842 - httpx - DEBUG - _config.py:148 - load_ssl_context_verify - load_verify_locations cafile='/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-24 23:37:06,298 - httpx - DEBUG - _config.py:82 - load_ssl_context - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-24 23:37:06,299 - httpx - DEBUG - _config.py:148 - load_ssl_context_verify - load_verify_locations cafile='/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-24 23:37:06,306 - pinecone_plugin_interface.logging - INFO - discover_namespace_packages.py:12 - discover_subpackages - Discovering subpackages in _NamespacePath(['/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/pinecone_plugins'])
2024-10-24 23:37:06,306 - pinecone_plugin_interface.logging - INFO - discover_plugins.py:9 - discover_plugins - Looking for plugins in pinecone_plugins.inference
2024-10-24 23:37:06,317 - pinecone_plugin_interface.logging - INFO - installation.py:10 - install_plugins - Installing plugin inference into Pinecone
2024-10-24 23:37:06,645 - pinecone.core.openapi.shared.rest - DEBUG - rest.py:264 - request - response body: b'{"indexes":[{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}]}'
2024-10-24 23:37:06,647 - root - INFO - pinecone_manager.py:72 - _initialize - Creating new Pinecone index: book-embeddings
2024-10-24 23:37:07,156 - pinecone.core.openapi.shared.rest - DEBUG - rest.py:264 - request - response body: b'{"error":{"code":"ALREADY_EXISTS","message":"Resource  already exists"},"status":409}'
2024-10-24 23:37:07,156 - root - INFO - pinecone_manager.py:86 - _initialize - Index book-embeddings already exists. Using existing index.
2024-10-24 23:37:07,553 - pinecone.core.openapi.shared.rest - DEBUG - rest.py:264 - request - response body: b'{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}'
2024-10-24 23:37:08,517 - httpx - DEBUG - _config.py:82 - load_ssl_context - load_ssl_context verify=True cert=None trust_env=True http2=False
2024-10-24 23:37:08,519 - httpx - DEBUG - _config.py:148 - load_ssl_context_verify - load_verify_locations cafile='/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/certifi/cacert.pem'
2024-10-24 23:37:08,525 - pinecone_plugin_interface.logging - INFO - discover_namespace_packages.py:12 - discover_subpackages - Discovering subpackages in _NamespacePath(['/Users/eduardizgorodin/Projects/rag_book_assistant/rag_venv/lib/python3.12/site-packages/pinecone_plugins'])
2024-10-24 23:37:08,525 - pinecone_plugin_interface.logging - INFO - discover_plugins.py:9 - discover_plugins - Looking for plugins in pinecone_plugins.inference
2024-10-24 23:37:08,529 - pinecone_plugin_interface.logging - INFO - installation.py:10 - install_plugins - Installing plugin inference into Pinecone
2024-10-24 23:37:08,836 - pinecone.core.openapi.shared.rest - DEBUG - rest.py:264 - request - response body: b'{"indexes":[{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}]}'
2024-10-24 23:37:08,837 - root - INFO - pinecone_manager.py:72 - _initialize - Creating new Pinecone index: book-embeddings
2024-10-24 23:37:09,195 - pinecone.core.openapi.shared.rest - DEBUG - rest.py:264 - request - response body: b'{"error":{"code":"ALREADY_EXISTS","message":"Resource  already exists"},"status":409}'
2024-10-24 23:37:09,195 - root - INFO - pinecone_manager.py:86 - _initialize - Index book-embeddings already exists. Using existing index.
2024-10-24 23:37:09,506 - pinecone.core.openapi.shared.rest - DEBUG - rest.py:264 - request - response body: b'{"name":"book-embeddings","metric":"cosine","dimension":1536,"status":{"ready":true,"state":"Ready"},"host":"book-embeddings-uoy9ovm.svc.aped-4627-b74a.pinecone.io","spec":{"serverless":{"region":"us-east-1","cloud":"aws"}},"deletion_protection":"disabled"}'
